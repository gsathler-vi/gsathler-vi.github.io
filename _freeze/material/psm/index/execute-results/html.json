{
  "hash": "85f02cc1d54aaaff02e3e9bf3b02d12f",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Avaliação de Impacto Causal com Propensity Score Matching\"\nsubtitle: \"Estimação do Efeito das Políticas de Inclusão e Permanência sobre o Desempenho Acadêmico\"\nexecute:\n  eval: true\nbibliography: references.bib\n---\n\nPara testar a Hipótese 1, que postula um efeito **causal** das políticas de permanência sobre o desempenho acadêmico, a análise por regressão convencional é insuficiente devido ao problema fundamental de **auto-seleção** [@facure_causal_inference; @huntington_klein_effect].\n\n::: callout-note\n## Objetivo\n\nEstimar o efeito causal das políticas de inclusão (ProUni, FIES) e permanência (auxílios) sobre o desempenho acadêmico no ENADE, utilizando Propensity Score Matching (PSM) para mitigar o viés de seleção.\n:::\n\n## Estrutura das Análises\n\nAs análises estão organizadas em três blocos principais, respeitando a natureza institucional de cada política:\n\n### Bloco 1: Políticas de Inclusão (IES Privadas vs Pagantes)\n\nCada política é comparada com estudantes **pagantes** (sem bolsa/financiamento) nas mesmas IES privadas.\n\n| Tratamento            | Controle                  |\n|-----------------------|---------------------------|\n| ProUni Integral       | Pagantes (sem bolsa/FIES) |\n| ProUni Parcial        | Pagantes (sem bolsa/FIES) |\n| FIES                  | Pagantes (sem bolsa/FIES) |\n| ProUni Parcial + FIES | Pagantes (sem bolsa/FIES) |\n\n### Bloco 2: Políticas de Permanência (IES Públicas)\n\n| Tratamento          | Amostra      |\n|---------------------|--------------|\n| Auxílio Permanência | IES Públicas |\n| Auxílio Alimentação | IES Públicas |\n\n### Bloco 3: Auxílios entre Estudantes com Curso Gratuito\n\nAnalisa o efeito **incremental** dos auxílios de permanência comparando estudantes de IES públicas (com auxílios) com estudantes ProUni Integral em IES privadas (sem auxílios).\n\n| Tratamento                        | Controle                          |\n|-----------------------------------|-----------------------------------|\n| Aux. Permanência (IES Públicas)   | ProUni Integral (sem aux. perm.)  |\n| Aux. Alimentação (IES Públicas)   | ProUni Integral (sem aux. alim.)  |\n\n------------------------------------------------------------------------\n\n## Configuração e Carga dos Dados\n\n::: {#30b09df9 .cell execution_count=1}\n``` {.python .cell-code code-fold=\"true\" code-summary=\"Expandir configuração\"}\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.neighbors import NearestNeighbors\nfrom scipy.stats import ttest_ind\nimport statsmodels.api as sm\nfrom IPython.display import display, Markdown\nimport warnings\nwarnings.filterwarnings('ignore')\n\n# Configurações\nsns.set_style(\"whitegrid\")\nplt.rcParams['figure.figsize'] = (10, 6)\n\n# Paleta de cores do projeto\nPALETTE_MAIN = ['#75A8D9', '#72994E', '#EE6331', '#E7B10A', '#419599', '#447099', '#D44000', '#404041']\n\n# Nível de significância padrão\nALPHA = 0.05\n\n# Mapeamentos\nMAP_CURSO = {1: 'Administração', 13: 'Ciências Econômicas', 22: 'Ciências Contábeis'}\n```\n:::\n\n\n### Carregamento da Base de Dados\n\n::: {#6190ef59 .cell execution_count=2}\n``` {.python .cell-code}\ndf_full = pd.read_parquet('dataset/01_enade.parquet')\ndisplay(Markdown(f\"✅ **Dados carregados:** {len(df_full):,} observações\"))\n\n# Criar subconjuntos\ndf_privadas = df_full[df_full['cod_ies_cat'] == 3].copy()\ndf_publicas = df_full[df_full['cod_ies_cat'] == 1].copy()\n\n# Grupo de controle: pagantes sem nenhuma bolsa ou financiamento\ndf_pagantes = df_privadas[\n    (df_privadas['prouni_int'] == 0) & \n    (df_privadas['prouni_par'] == 0) & \n    (df_privadas['fies'] == 0) &\n    (df_privadas['prouni_fies'] == 0)\n].copy()\n\ndisplay(Markdown(f\"\"\"\n### Distribuição da Amostra\n\n| Categoria | N | % |\n|-----------|---:|---:|\n| IES Públicas | {len(df_publicas):,} | {len(df_publicas)/len(df_full)*100:.1f}% |\n| IES Privadas | {len(df_privadas):,} | {len(df_privadas)/len(df_full)*100:.1f}% |\n| Pagantes (Controle) | {len(df_pagantes):,} | {len(df_pagantes)/len(df_privadas)*100:.1f}% das privadas |\n\"\"\"))\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n✅ **Dados carregados:** 301,824 observações\n:::\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n\n### Distribuição da Amostra\n\n| Categoria | N | % |\n|-----------|---:|---:|\n| IES Públicas | 89,335 | 29.6% |\n| IES Privadas | 105,106 | 34.8% |\n| Pagantes (Controle) | 30,965 | 29.5% das privadas |\n\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## Definição das Covariáveis\n\n::: callout-tip\n## Seleção de Covariáveis\n\nA literatura recomenda incluir todas as variáveis associadas **tanto à decisão de tratamento quanto ao resultado**, mesmo que não sejam estatisticamente significantes no modelo Logit [@facure_causal_inference].\n:::\n\n::: {#515b5079 .cell execution_count=3}\n``` {.python .cell-code}\n# Variável de Resultado\nresultado = 'nt_ger'\n\n# Covariáveis para o Propensity Score\ncovariates_base = [\n    'cod_pessoas_res',\n    'genero_fem',\n    'cor_preta', 'cor_parda',\n    'renda_fx2', 'renda_fx3', 'renda_fx4', 'renda_fx5',\n    'em_maioria_pub', 'em_metade_pub', 'em_maioria_priv', 'em_total_priv',\n    'esc_resp_f1', 'esc_resp_f2', 'esc_resp_em', 'esc_resp_sup'\n]\n\ndisplay(Markdown(f\"**Total de covariáveis:** {len(covariates_base)}\"))\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n**Total de covariáveis:** 16\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## Funções Auxiliares para PSM\n\n::: {#e8564d26 .cell execution_count=4}\n``` {.python .cell-code code-fold=\"true\" code-summary=\"Expandir funções auxiliares\"}\ndef calculate_smd(df, treatment_col, var_col):\n    \"\"\"Calcula a Diferença de Médias Padronizada (SMD).\"\"\"\n    tratados = df[df[treatment_col] == 1][var_col]\n    controles = df[df[treatment_col] == 0][var_col]\n    \n    if len(tratados) == 0 or len(controles) == 0:\n        return 0\n    \n    mean_diff = tratados.mean() - controles.mean()\n    pooled_std = np.sqrt((tratados.var(ddof=1) + controles.var(ddof=1)) / 2)\n    \n    if pooled_std == 0:\n        return 0\n    return mean_diff / pooled_std\n\n\ndef run_psm_analysis(df, tratamento, resultado, covariates, nome_tratamento, min_tratados=30, show_logit=True):\n    \"\"\"Executa análise completa de PSM para um tratamento específico.\"\"\"\n    colunas = [resultado, tratamento] + covariates\n    df_psm = df[colunas].dropna().copy()\n    \n    n_total = len(df_psm)\n    n_tratados = int(df_psm[tratamento].sum())\n    n_controles = n_total - n_tratados\n    \n    if n_tratados < min_tratados:\n        return {'erro': f'Amostra insuficiente: apenas {n_tratados} tratados (mínimo: {min_tratados})'}\n    \n    if n_controles < min_tratados:\n        return {'erro': f'Amostra insuficiente: apenas {n_controles} controles (mínimo: {min_tratados})'}\n    \n    X = df_psm[covariates]\n    y = df_psm[tratamento]\n    \n    # Modelo Logit com statsmodels para sumário (com tratamento de erro)\n    logit_sm = None\n    try:\n        X_sm = sm.add_constant(X)\n        logit_sm = sm.Logit(y, X_sm).fit(disp=0, method='bfgs', maxiter=100)\n    except Exception as e:\n        # Se falhar, tenta método alternativo ou ignora o sumário\n        try:\n            logit_sm = sm.Logit(y, X_sm).fit(disp=0, method='lbfgs', maxiter=100)\n        except:\n            logit_sm = None  # Sumário não disponível\n    \n    # Sklearn para predição (mais robusto)\n    logit_model = LogisticRegression(max_iter=1000, solver='liblinear', C=1.0)\n    logit_model.fit(X, y)\n    \n    df_psm['propensity_score'] = logit_model.predict_proba(X)[:, 1]\n    \n    tratados = df_psm[df_psm[tratamento] == 1]\n    controles = df_psm[df_psm[tratamento] == 0]\n    \n    nn = NearestNeighbors(n_neighbors=1, algorithm='ball_tree')\n    nn.fit(controles['propensity_score'].values.reshape(-1, 1))\n    distances, indices = nn.kneighbors(tratados['propensity_score'].values.reshape(-1, 1))\n    \n    matched_controles = controles.iloc[indices.flatten()]\n    df_matched = pd.concat([tratados, matched_controles])\n    \n    media_tratados = df_matched[df_matched[tratamento] == 1][resultado].mean()\n    media_controles = df_matched[df_matched[tratamento] == 0][resultado].mean()\n    att = media_tratados - media_controles\n    \n    ttest = ttest_ind(\n        df_matched[df_matched[tratamento] == 1][resultado],\n        df_matched[df_matched[tratamento] == 0][resultado]\n    )\n    \n    balance = []\n    for var in covariates:\n        smd_antes = calculate_smd(df_psm, tratamento, var)\n        smd_depois = calculate_smd(df_matched, tratamento, var)\n        balance.append({\n            'Variável': var,\n            'SMD Antes': round(smd_antes, 4),\n            'SMD Depois': round(smd_depois, 4),\n            'Equilibrado': '✅' if abs(smd_depois) < 0.1 else '⚠️'\n        })\n    \n    df_balance = pd.DataFrame(balance)\n    n_equilibradas = sum(1 for b in balance if b['Equilibrado'] == '✅')\n    \n    return {\n        'nome': nome_tratamento,\n        'n_total': n_total,\n        'n_tratados': n_tratados,\n        'n_controles': n_controles,\n        'media_tratados': media_tratados,\n        'media_controles': media_controles,\n        'att': att,\n        'p_valor': ttest.pvalue,\n        'significante': ttest.pvalue < ALPHA,\n        'df_balance': df_balance,\n        'n_equilibradas': n_equilibradas,\n        'pct_equilibradas': n_equilibradas / len(covariates) * 100,\n        'df_psm': df_psm,\n        'df_matched': df_matched,\n        'logit_summary': logit_sm\n    }\n\n\ndef display_psm_results(resultado_psm, show_logit=True):\n    \"\"\"Exibe resultados do PSM de forma padronizada.\"\"\"\n    if 'erro' in resultado_psm:\n        display(Markdown(f\"⚠️ **{resultado_psm['erro']}**\"))\n        return\n    \n    sig_emoji = '✅' if resultado_psm['significante'] else '❌'\n    \n    display(Markdown(f\"\"\"\n### Resultados: {resultado_psm['nome']}\n\n| Métrica | Valor |\n|---------|-------|\n| N Total | {resultado_psm['n_total']:,} |\n| N Tratados | {resultado_psm['n_tratados']:,} |\n| N Controles | {resultado_psm['n_controles']:,} |\n| Nota Média (Tratados) | {resultado_psm['media_tratados']:.4f} |\n| Nota Média (Controles Pareados) | {resultado_psm['media_controles']:.4f} |\n| **ATT (Efeito Causal)** | **{resultado_psm['att']:.4f}** |\n| P-valor | {resultado_psm['p_valor']:.4f} |\n| Significante (α={ALPHA}) | {sig_emoji} |\n| Covariáveis Equilibradas | {resultado_psm['n_equilibradas']}/{len(resultado_psm['df_balance'])} ({resultado_psm['pct_equilibradas']:.0f}%) |\n\"\"\"))\n    \n    if show_logit and 'logit_summary' in resultado_psm and resultado_psm['logit_summary'] is not None:\n        display(Markdown(\"#### Modelo Logit para Propensity Score\"))\n        display(resultado_psm['logit_summary'].summary())\n\n\ndef plot_love_plot(df_balance, titulo):\n    \"\"\"Gera Love Plot para verificação de equilíbrio.\"\"\"\n    fig, ax = plt.subplots(figsize=(10, 8))\n    y_pos = range(len(df_balance))\n    \n    ax.scatter(df_balance['SMD Antes'], y_pos, color=PALETTE_MAIN[0], \n               marker='o', s=80, label='Antes do Matching', zorder=3)\n    ax.scatter(df_balance['SMD Depois'], y_pos, color=PALETTE_MAIN[2], \n               marker='s', s=80, label='Após o Matching', zorder=3)\n    \n    ax.axvline(0, color='gray', linestyle='--', alpha=0.7)\n    ax.axvline(0.1, color=PALETTE_MAIN[1], linestyle=':', linewidth=2, label='Limiar (±0.1)')\n    ax.axvline(-0.1, color=PALETTE_MAIN[1], linestyle=':', linewidth=2)\n    \n    ax.set_yticks(y_pos)\n    ax.set_yticklabels(df_balance['Variável'])\n    ax.set_xlabel('Diferença de Médias Padronizada (SMD)')\n    ax.set_title(f'Verificação de Equilíbrio - {titulo}', fontweight='bold')\n    ax.legend(loc='lower right')\n    ax.grid(axis='x', alpha=0.3)\n    plt.tight_layout()\n    plt.show()\n\n\ndef plot_ps_distribution(df_psm, tratamento, titulo):\n    \"\"\"Gera gráfico de distribuição dos propensity scores.\"\"\"\n    fig, ax = plt.subplots(figsize=(10, 5))\n    \n    tratados = df_psm[df_psm[tratamento] == 1]['propensity_score']\n    controles = df_psm[df_psm[tratamento] == 0]['propensity_score']\n    \n    ax.hist(controles, bins=50, alpha=0.6, label='Controle', color=PALETTE_MAIN[0], density=True)\n    ax.hist(tratados, bins=50, alpha=0.6, label='Tratamento', color=PALETTE_MAIN[2], density=True)\n    \n    ax.set_xlabel('Propensity Score')\n    ax.set_ylabel('Densidade')\n    ax.set_title(f'Distribuição dos Propensity Scores - {titulo}', fontweight='bold')\n    ax.legend()\n    plt.tight_layout()\n    plt.show()\n```\n:::\n\n\n------------------------------------------------------------------------\n\n## Bloco 1: Políticas de Inclusão (IES Privadas vs Pagantes)\n\n::: callout-important\n## Estratégia de Identificação\n\nCada política de inclusão é comparada com estudantes **pagantes** nas mesmas IES privadas — aqueles que não possuem ProUni, FIES ou outras bolsas. Esta comparação permite isolar o efeito da política controlando por características observáveis.\n:::\n\n### ProUni Integral vs Pagantes\n\n::: {#aca7ebbe .cell execution_count=5}\n``` {.python .cell-code}\n# Tratados: ProUni Integral\ndf_prouni_int = df_privadas[df_privadas['prouni_int'] == 1].copy()\ndf_prouni_int['tratamento'] = 1\n\n# Controles: Pagantes\ndf_controle = df_pagantes.copy()\ndf_controle['tratamento'] = 0\n\ndf_analise1 = pd.concat([df_prouni_int, df_controle])\n\nresultado_prouni_int = run_psm_analysis(\n    df_analise1, 'tratamento', resultado, covariates_base, \n    'ProUni Integral vs Pagantes'\n)\ndisplay_psm_results(resultado_prouni_int)\n\nif 'erro' not in resultado_prouni_int:\n    plot_ps_distribution(resultado_prouni_int['df_psm'], 'tratamento', 'ProUni Integral vs Pagantes')\n    plot_love_plot(resultado_prouni_int['df_balance'], 'ProUni Integral vs Pagantes')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n\n### Resultados: ProUni Integral vs Pagantes\n\n| Métrica | Valor |\n|---------|-------|\n| N Total | 40,087 |\n| N Tratados | 9,188 |\n| N Controles | 30,899 |\n| Nota Média (Tratados) | 44.0869 |\n| Nota Média (Controles Pareados) | 31.7546 |\n| **ATT (Efeito Causal)** | **12.3323** |\n| P-valor | 0.0000 |\n| Significante (α=0.05) | ✅ |\n| Covariáveis Equilibradas | 16/16 (100%) |\n\n:::\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n#### Modelo Logit para Propensity Score\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<table class=\"simpletable\">\n<caption>Logit Regression Results</caption>\n<tr>\n  <th>Dep. Variable:</th>      <td>tratamento</td>    <th>  No. Observations:  </th>  <td> 40087</td> \n</tr>\n<tr>\n  <th>Model:</th>                 <td>Logit</td>      <th>  Df Residuals:      </th>  <td> 40070</td> \n</tr>\n<tr>\n  <th>Method:</th>                 <td>MLE</td>       <th>  Df Model:          </th>  <td>    16</td> \n</tr>\n<tr>\n  <th>Date:</th>            <td>Tue, 25 Nov 2025</td> <th>  Pseudo R-squ.:     </th>  <td>0.1285</td> \n</tr>\n<tr>\n  <th>Time:</th>                <td>19:55:24</td>     <th>  Log-Likelihood:    </th> <td> -18806.</td>\n</tr>\n<tr>\n  <th>converged:</th>             <td>False</td>      <th>  LL-Null:           </th> <td> -21579.</td>\n</tr>\n<tr>\n  <th>Covariance Type:</th>     <td>nonrobust</td>    <th>  LLR p-value:       </th>  <td> 0.000</td> \n</tr>\n</table>\n<table class=\"simpletable\">\n<tr>\n         <td></td>            <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>  \n</tr>\n<tr>\n  <th>const</th>           <td>   -1.6286</td> <td>    0.067</td> <td>  -24.297</td> <td> 0.000</td> <td>   -1.760</td> <td>   -1.497</td>\n</tr>\n<tr>\n  <th>cod_pessoas_res</th> <td>    0.0644</td> <td>    0.008</td> <td>    8.119</td> <td> 0.000</td> <td>    0.049</td> <td>    0.080</td>\n</tr>\n<tr>\n  <th>genero_fem</th>      <td>   -0.1452</td> <td>    0.026</td> <td>   -5.580</td> <td> 0.000</td> <td>   -0.196</td> <td>   -0.094</td>\n</tr>\n<tr>\n  <th>cor_preta</th>       <td>    0.6369</td> <td>    0.043</td> <td>   14.694</td> <td> 0.000</td> <td>    0.552</td> <td>    0.722</td>\n</tr>\n<tr>\n  <th>cor_parda</th>       <td>    0.3281</td> <td>    0.027</td> <td>   11.932</td> <td> 0.000</td> <td>    0.274</td> <td>    0.382</td>\n</tr>\n<tr>\n  <th>renda_fx2</th>       <td>    0.4585</td> <td>    0.038</td> <td>   11.916</td> <td> 0.000</td> <td>    0.383</td> <td>    0.534</td>\n</tr>\n<tr>\n  <th>renda_fx3</th>       <td>    0.0484</td> <td>    0.040</td> <td>    1.205</td> <td> 0.228</td> <td>   -0.030</td> <td>    0.127</td>\n</tr>\n<tr>\n  <th>renda_fx4</th>       <td>   -0.3999</td> <td>    0.049</td> <td>   -8.198</td> <td> 0.000</td> <td>   -0.496</td> <td>   -0.304</td>\n</tr>\n<tr>\n  <th>renda_fx5</th>       <td>   -0.9991</td> <td>    0.057</td> <td>  -17.561</td> <td> 0.000</td> <td>   -1.111</td> <td>   -0.888</td>\n</tr>\n<tr>\n  <th>em_maioria_pub</th>  <td>   -1.4801</td> <td>    0.086</td> <td>  -17.172</td> <td> 0.000</td> <td>   -1.649</td> <td>   -1.311</td>\n</tr>\n<tr>\n  <th>em_metade_pub</th>   <td>   -1.7527</td> <td>    0.187</td> <td>   -9.369</td> <td> 0.000</td> <td>   -2.119</td> <td>   -1.386</td>\n</tr>\n<tr>\n  <th>em_maioria_priv</th> <td>   -2.0689</td> <td>    0.134</td> <td>  -15.396</td> <td> 0.000</td> <td>   -2.332</td> <td>   -1.805</td>\n</tr>\n<tr>\n  <th>em_total_priv</th>   <td>   -2.1068</td> <td>    0.062</td> <td>  -33.873</td> <td> 0.000</td> <td>   -2.229</td> <td>   -1.985</td>\n</tr>\n<tr>\n  <th>esc_resp_f1</th>     <td>    0.4349</td> <td>    0.065</td> <td>    6.729</td> <td> 0.000</td> <td>    0.308</td> <td>    0.562</td>\n</tr>\n<tr>\n  <th>esc_resp_f2</th>     <td>    0.5678</td> <td>    0.066</td> <td>    8.662</td> <td> 0.000</td> <td>    0.439</td> <td>    0.696</td>\n</tr>\n<tr>\n  <th>esc_resp_em</th>     <td>    0.5905</td> <td>    0.062</td> <td>    9.522</td> <td> 0.000</td> <td>    0.469</td> <td>    0.712</td>\n</tr>\n<tr>\n  <th>esc_resp_sup</th>    <td>    0.4143</td> <td>    0.069</td> <td>    5.966</td> <td> 0.000</td> <td>    0.278</td> <td>    0.550</td>\n</tr>\n</table>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-6-output-4.png){width=950 height=469}\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-6-output-5.png){width=951 height=758}\n:::\n:::\n\n\n### ProUni Parcial vs Pagantes\n\n::: {#8c32f082 .cell execution_count=6}\n``` {.python .cell-code}\ndf_prouni_par = df_privadas[df_privadas['prouni_par'] == 1].copy()\ndf_prouni_par['tratamento'] = 1\n\ndf_controle = df_pagantes.copy()\ndf_controle['tratamento'] = 0\n\ndf_analise2 = pd.concat([df_prouni_par, df_controle])\n\nresultado_prouni_par = run_psm_analysis(\n    df_analise2, 'tratamento', resultado, covariates_base,\n    'ProUni Parcial vs Pagantes'\n)\ndisplay_psm_results(resultado_prouni_par)\n\nif 'erro' not in resultado_prouni_par:\n    plot_ps_distribution(resultado_prouni_par['df_psm'], 'tratamento', 'ProUni Parcial vs Pagantes')\n    plot_love_plot(resultado_prouni_par['df_balance'], 'ProUni Parcial vs Pagantes')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n\n### Resultados: ProUni Parcial vs Pagantes\n\n| Métrica | Valor |\n|---------|-------|\n| N Total | 35,805 |\n| N Tratados | 4,906 |\n| N Controles | 30,899 |\n| Nota Média (Tratados) | 38.2642 |\n| Nota Média (Controles Pareados) | 32.0608 |\n| **ATT (Efeito Causal)** | **6.2034** |\n| P-valor | 0.0000 |\n| Significante (α=0.05) | ✅ |\n| Covariáveis Equilibradas | 16/16 (100%) |\n\n:::\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n#### Modelo Logit para Propensity Score\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<table class=\"simpletable\">\n<caption>Logit Regression Results</caption>\n<tr>\n  <th>Dep. Variable:</th>      <td>tratamento</td>    <th>  No. Observations:  </th>  <td> 35805</td> \n</tr>\n<tr>\n  <th>Model:</th>                 <td>Logit</td>      <th>  Df Residuals:      </th>  <td> 35788</td> \n</tr>\n<tr>\n  <th>Method:</th>                 <td>MLE</td>       <th>  Df Model:          </th>  <td>    16</td> \n</tr>\n<tr>\n  <th>Date:</th>            <td>Tue, 25 Nov 2025</td> <th>  Pseudo R-squ.:     </th>  <td>0.08960</td>\n</tr>\n<tr>\n  <th>Time:</th>                <td>19:55:25</td>     <th>  Log-Likelihood:    </th> <td> -13023.</td>\n</tr>\n<tr>\n  <th>converged:</th>             <td>False</td>      <th>  LL-Null:           </th> <td> -14305.</td>\n</tr>\n<tr>\n  <th>Covariance Type:</th>     <td>nonrobust</td>    <th>  LLR p-value:       </th>  <td> 0.000</td> \n</tr>\n</table>\n<table class=\"simpletable\">\n<tr>\n         <td></td>            <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>  \n</tr>\n<tr>\n  <th>const</th>           <td>   -2.3820</td> <td>    0.087</td> <td>  -27.318</td> <td> 0.000</td> <td>   -2.553</td> <td>   -2.211</td>\n</tr>\n<tr>\n  <th>cod_pessoas_res</th> <td>    0.0240</td> <td>    0.010</td> <td>    2.382</td> <td> 0.017</td> <td>    0.004</td> <td>    0.044</td>\n</tr>\n<tr>\n  <th>genero_fem</th>      <td>    0.1531</td> <td>    0.033</td> <td>    4.591</td> <td> 0.000</td> <td>    0.088</td> <td>    0.218</td>\n</tr>\n<tr>\n  <th>cor_preta</th>       <td>    0.0885</td> <td>    0.060</td> <td>    1.477</td> <td> 0.140</td> <td>   -0.029</td> <td>    0.206</td>\n</tr>\n<tr>\n  <th>cor_parda</th>       <td>   -0.0794</td> <td>    0.035</td> <td>   -2.243</td> <td> 0.025</td> <td>   -0.149</td> <td>   -0.010</td>\n</tr>\n<tr>\n  <th>renda_fx2</th>       <td>    0.5921</td> <td>    0.057</td> <td>   10.330</td> <td> 0.000</td> <td>    0.480</td> <td>    0.704</td>\n</tr>\n<tr>\n  <th>renda_fx3</th>       <td>    0.5487</td> <td>    0.057</td> <td>    9.547</td> <td> 0.000</td> <td>    0.436</td> <td>    0.661</td>\n</tr>\n<tr>\n  <th>renda_fx4</th>       <td>    0.4969</td> <td>    0.063</td> <td>    7.918</td> <td> 0.000</td> <td>    0.374</td> <td>    0.620</td>\n</tr>\n<tr>\n  <th>renda_fx5</th>       <td>    0.2737</td> <td>    0.065</td> <td>    4.203</td> <td> 0.000</td> <td>    0.146</td> <td>    0.401</td>\n</tr>\n<tr>\n  <th>em_maioria_pub</th>  <td>   -1.1551</td> <td>    0.096</td> <td>  -12.000</td> <td> 0.000</td> <td>   -1.344</td> <td>   -0.966</td>\n</tr>\n<tr>\n  <th>em_metade_pub</th>   <td>   -1.2570</td> <td>    0.197</td> <td>   -6.384</td> <td> 0.000</td> <td>   -1.643</td> <td>   -0.871</td>\n</tr>\n<tr>\n  <th>em_maioria_priv</th> <td>   -2.1288</td> <td>    0.179</td> <td>  -11.900</td> <td> 0.000</td> <td>   -2.479</td> <td>   -1.778</td>\n</tr>\n<tr>\n  <th>em_total_priv</th>   <td>   -2.5202</td> <td>    0.096</td> <td>  -26.141</td> <td> 0.000</td> <td>   -2.709</td> <td>   -2.331</td>\n</tr>\n<tr>\n  <th>esc_resp_f1</th>     <td>    0.2067</td> <td>    0.081</td> <td>    2.547</td> <td> 0.011</td> <td>    0.048</td> <td>    0.366</td>\n</tr>\n<tr>\n  <th>esc_resp_f2</th>     <td>    0.3651</td> <td>    0.082</td> <td>    4.454</td> <td> 0.000</td> <td>    0.204</td> <td>    0.526</td>\n</tr>\n<tr>\n  <th>esc_resp_em</th>     <td>    0.4195</td> <td>    0.077</td> <td>    5.420</td> <td> 0.000</td> <td>    0.268</td> <td>    0.571</td>\n</tr>\n<tr>\n  <th>esc_resp_sup</th>    <td>    0.2896</td> <td>    0.087</td> <td>    3.346</td> <td> 0.001</td> <td>    0.120</td> <td>    0.459</td>\n</tr>\n</table>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-7-output-4.png){width=951 height=469}\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-7-output-5.png){width=951 height=758}\n:::\n:::\n\n\n### FIES vs Pagantes\n\n::: {#8fda5aa9 .cell execution_count=7}\n``` {.python .cell-code}\ndf_fies = df_privadas[df_privadas['fies'] == 1].copy()\ndf_fies['tratamento'] = 1\n\ndf_controle = df_pagantes.copy()\ndf_controle['tratamento'] = 0\n\ndf_analise3 = pd.concat([df_fies, df_controle])\n\nresultado_fies = run_psm_analysis(\n    df_analise3, 'tratamento', resultado, covariates_base,\n    'FIES vs Pagantes'\n)\ndisplay_psm_results(resultado_fies)\n\nif 'erro' not in resultado_fies:\n    plot_ps_distribution(resultado_fies['df_psm'], 'tratamento', 'FIES vs Pagantes')\n    plot_love_plot(resultado_fies['df_balance'], 'FIES vs Pagantes')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n\n### Resultados: FIES vs Pagantes\n\n| Métrica | Valor |\n|---------|-------|\n| N Total | 40,525 |\n| N Tratados | 9,626 |\n| N Controles | 30,899 |\n| Nota Média (Tratados) | 36.1186 |\n| Nota Média (Controles Pareados) | 31.7918 |\n| **ATT (Efeito Causal)** | **4.3268** |\n| P-valor | 0.0000 |\n| Significante (α=0.05) | ✅ |\n| Covariáveis Equilibradas | 16/16 (100%) |\n\n:::\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n#### Modelo Logit para Propensity Score\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<table class=\"simpletable\">\n<caption>Logit Regression Results</caption>\n<tr>\n  <th>Dep. Variable:</th>      <td>tratamento</td>    <th>  No. Observations:  </th>  <td> 40525</td> \n</tr>\n<tr>\n  <th>Model:</th>                 <td>Logit</td>      <th>  Df Residuals:      </th>  <td> 40508</td> \n</tr>\n<tr>\n  <th>Method:</th>                 <td>MLE</td>       <th>  Df Model:          </th>  <td>    16</td> \n</tr>\n<tr>\n  <th>Date:</th>            <td>Tue, 25 Nov 2025</td> <th>  Pseudo R-squ.:     </th>  <td>0.04434</td>\n</tr>\n<tr>\n  <th>Time:</th>                <td>19:55:26</td>     <th>  Log-Likelihood:    </th> <td> -21232.</td>\n</tr>\n<tr>\n  <th>converged:</th>             <td>True</td>       <th>  LL-Null:           </th> <td> -22217.</td>\n</tr>\n<tr>\n  <th>Covariance Type:</th>     <td>nonrobust</td>    <th>  LLR p-value:       </th>  <td> 0.000</td> \n</tr>\n</table>\n<table class=\"simpletable\">\n<tr>\n         <td></td>            <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>  \n</tr>\n<tr>\n  <th>const</th>           <td>   -1.5309</td> <td>    0.057</td> <td>  -26.906</td> <td> 0.000</td> <td>   -1.642</td> <td>   -1.419</td>\n</tr>\n<tr>\n  <th>cod_pessoas_res</th> <td>   -0.0181</td> <td>    0.008</td> <td>   -2.393</td> <td> 0.017</td> <td>   -0.033</td> <td>   -0.003</td>\n</tr>\n<tr>\n  <th>genero_fem</th>      <td>    0.1521</td> <td>    0.025</td> <td>    6.090</td> <td> 0.000</td> <td>    0.103</td> <td>    0.201</td>\n</tr>\n<tr>\n  <th>cor_preta</th>       <td>    0.5299</td> <td>    0.043</td> <td>   12.351</td> <td> 0.000</td> <td>    0.446</td> <td>    0.614</td>\n</tr>\n<tr>\n  <th>cor_parda</th>       <td>    0.2727</td> <td>    0.026</td> <td>   10.399</td> <td> 0.000</td> <td>    0.221</td> <td>    0.324</td>\n</tr>\n<tr>\n  <th>renda_fx2</th>       <td>    0.3188</td> <td>    0.035</td> <td>    9.032</td> <td> 0.000</td> <td>    0.250</td> <td>    0.388</td>\n</tr>\n<tr>\n  <th>renda_fx3</th>       <td>   -0.0241</td> <td>    0.037</td> <td>   -0.656</td> <td> 0.512</td> <td>   -0.096</td> <td>    0.048</td>\n</tr>\n<tr>\n  <th>renda_fx4</th>       <td>   -0.3087</td> <td>    0.044</td> <td>   -7.095</td> <td> 0.000</td> <td>   -0.394</td> <td>   -0.223</td>\n</tr>\n<tr>\n  <th>renda_fx5</th>       <td>   -0.7049</td> <td>    0.047</td> <td>  -14.911</td> <td> 0.000</td> <td>   -0.798</td> <td>   -0.612</td>\n</tr>\n<tr>\n  <th>em_maioria_pub</th>  <td>   -0.0578</td> <td>    0.052</td> <td>   -1.114</td> <td> 0.265</td> <td>   -0.159</td> <td>    0.044</td>\n</tr>\n<tr>\n  <th>em_metade_pub</th>   <td>   -0.7781</td> <td>    0.131</td> <td>   -5.949</td> <td> 0.000</td> <td>   -1.034</td> <td>   -0.522</td>\n</tr>\n<tr>\n  <th>em_maioria_priv</th> <td>   -0.1834</td> <td>    0.064</td> <td>   -2.854</td> <td> 0.004</td> <td>   -0.309</td> <td>   -0.057</td>\n</tr>\n<tr>\n  <th>em_total_priv</th>   <td>   -0.6004</td> <td>    0.037</td> <td>  -16.297</td> <td> 0.000</td> <td>   -0.673</td> <td>   -0.528</td>\n</tr>\n<tr>\n  <th>esc_resp_f1</th>     <td>    0.4175</td> <td>    0.055</td> <td>    7.603</td> <td> 0.000</td> <td>    0.310</td> <td>    0.525</td>\n</tr>\n<tr>\n  <th>esc_resp_f2</th>     <td>    0.4044</td> <td>    0.056</td> <td>    7.175</td> <td> 0.000</td> <td>    0.294</td> <td>    0.515</td>\n</tr>\n<tr>\n  <th>esc_resp_em</th>     <td>    0.4363</td> <td>    0.052</td> <td>    8.466</td> <td> 0.000</td> <td>    0.335</td> <td>    0.537</td>\n</tr>\n<tr>\n  <th>esc_resp_sup</th>    <td>    0.2233</td> <td>    0.057</td> <td>    3.922</td> <td> 0.000</td> <td>    0.112</td> <td>    0.335</td>\n</tr>\n</table>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-8-output-4.png){width=950 height=469}\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-8-output-5.png){width=951 height=758}\n:::\n:::\n\n\n### ProUni Parcial + FIES vs Pagantes\n\n::: {#dd221853 .cell execution_count=8}\n``` {.python .cell-code}\ndf_prouni_fies = df_privadas[df_privadas['prouni_fies'] == 1].copy()\ndf_prouni_fies['tratamento'] = 1\n\ndf_controle = df_pagantes.copy()\ndf_controle['tratamento'] = 0\n\ndf_analise4 = pd.concat([df_prouni_fies, df_controle])\n\nresultado_prouni_fies = run_psm_analysis(\n    df_analise4, 'tratamento', resultado, covariates_base,\n    'ProUni Parcial + FIES vs Pagantes'\n)\ndisplay_psm_results(resultado_prouni_fies)\n\nif 'erro' not in resultado_prouni_fies:\n    plot_ps_distribution(resultado_prouni_fies['df_psm'], 'tratamento', 'ProUni+FIES vs Pagantes')\n    plot_love_plot(resultado_prouni_fies['df_balance'], 'ProUni+FIES vs Pagantes')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n\n### Resultados: ProUni Parcial + FIES vs Pagantes\n\n| Métrica | Valor |\n|---------|-------|\n| N Total | 32,028 |\n| N Tratados | 1,129 |\n| N Controles | 30,899 |\n| Nota Média (Tratados) | 38.8139 |\n| Nota Média (Controles Pareados) | 32.5833 |\n| **ATT (Efeito Causal)** | **6.2306** |\n| P-valor | 0.0000 |\n| Significante (α=0.05) | ✅ |\n| Covariáveis Equilibradas | 16/16 (100%) |\n\n:::\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n#### Modelo Logit para Propensity Score\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<table class=\"simpletable\">\n<caption>Logit Regression Results</caption>\n<tr>\n  <th>Dep. Variable:</th>      <td>tratamento</td>    <th>  No. Observations:  </th>   <td> 32028</td>  \n</tr>\n<tr>\n  <th>Model:</th>                 <td>Logit</td>      <th>  Df Residuals:      </th>   <td> 32011</td>  \n</tr>\n<tr>\n  <th>Method:</th>                 <td>MLE</td>       <th>  Df Model:          </th>   <td>    16</td>  \n</tr>\n<tr>\n  <th>Date:</th>            <td>Tue, 25 Nov 2025</td> <th>  Pseudo R-squ.:     </th>   <td>0.05611</td> \n</tr>\n<tr>\n  <th>Time:</th>                <td>19:55:28</td>     <th>  Log-Likelihood:    </th>  <td> -4611.5</td> \n</tr>\n<tr>\n  <th>converged:</th>             <td>False</td>      <th>  LL-Null:           </th>  <td> -4885.7</td> \n</tr>\n<tr>\n  <th>Covariance Type:</th>     <td>nonrobust</td>    <th>  LLR p-value:       </th> <td>2.047e-106</td>\n</tr>\n</table>\n<table class=\"simpletable\">\n<tr>\n         <td></td>            <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>  \n</tr>\n<tr>\n  <th>const</th>           <td>   -3.3030</td> <td>    0.152</td> <td>  -21.788</td> <td> 0.000</td> <td>   -3.600</td> <td>   -3.006</td>\n</tr>\n<tr>\n  <th>cod_pessoas_res</th> <td>   -0.0337</td> <td>    0.019</td> <td>   -1.739</td> <td> 0.082</td> <td>   -0.072</td> <td>    0.004</td>\n</tr>\n<tr>\n  <th>genero_fem</th>      <td>   -0.0483</td> <td>    0.063</td> <td>   -0.764</td> <td> 0.445</td> <td>   -0.172</td> <td>    0.076</td>\n</tr>\n<tr>\n  <th>cor_preta</th>       <td>    0.3993</td> <td>    0.105</td> <td>    3.805</td> <td> 0.000</td> <td>    0.194</td> <td>    0.605</td>\n</tr>\n<tr>\n  <th>cor_parda</th>       <td>    0.1566</td> <td>    0.067</td> <td>    2.338</td> <td> 0.019</td> <td>    0.025</td> <td>    0.288</td>\n</tr>\n<tr>\n  <th>renda_fx2</th>       <td>    0.4470</td> <td>    0.094</td> <td>    4.737</td> <td> 0.000</td> <td>    0.262</td> <td>    0.632</td>\n</tr>\n<tr>\n  <th>renda_fx3</th>       <td>    0.0867</td> <td>    0.099</td> <td>    0.873</td> <td> 0.383</td> <td>   -0.108</td> <td>    0.281</td>\n</tr>\n<tr>\n  <th>renda_fx4</th>       <td>   -0.1941</td> <td>    0.118</td> <td>   -1.644</td> <td> 0.100</td> <td>   -0.425</td> <td>    0.037</td>\n</tr>\n<tr>\n  <th>renda_fx5</th>       <td>   -0.6847</td> <td>    0.136</td> <td>   -5.045</td> <td> 0.000</td> <td>   -0.951</td> <td>   -0.419</td>\n</tr>\n<tr>\n  <th>em_maioria_pub</th>  <td>   -0.6385</td> <td>    0.159</td> <td>   -4.010</td> <td> 0.000</td> <td>   -0.951</td> <td>   -0.326</td>\n</tr>\n<tr>\n  <th>em_metade_pub</th>   <td>   -1.1682</td> <td>    0.393</td> <td>   -2.970</td> <td> 0.003</td> <td>   -1.939</td> <td>   -0.397</td>\n</tr>\n<tr>\n  <th>em_maioria_priv</th> <td>   -0.7566</td> <td>    0.198</td> <td>   -3.814</td> <td> 0.000</td> <td>   -1.146</td> <td>   -0.368</td>\n</tr>\n<tr>\n  <th>em_total_priv</th>   <td>   -1.8371</td> <td>    0.151</td> <td>  -12.165</td> <td> 0.000</td> <td>   -2.133</td> <td>   -1.541</td>\n</tr>\n<tr>\n  <th>esc_resp_f1</th>     <td>    0.2598</td> <td>    0.147</td> <td>    1.762</td> <td> 0.078</td> <td>   -0.029</td> <td>    0.549</td>\n</tr>\n<tr>\n  <th>esc_resp_f2</th>     <td>    0.3232</td> <td>    0.150</td> <td>    2.151</td> <td> 0.031</td> <td>    0.029</td> <td>    0.618</td>\n</tr>\n<tr>\n  <th>esc_resp_em</th>     <td>    0.2999</td> <td>    0.141</td> <td>    2.124</td> <td> 0.034</td> <td>    0.023</td> <td>    0.577</td>\n</tr>\n<tr>\n  <th>esc_resp_sup</th>    <td>    0.2731</td> <td>    0.157</td> <td>    1.738</td> <td> 0.082</td> <td>   -0.035</td> <td>    0.581</td>\n</tr>\n</table>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-9-output-4.png){width=951 height=469}\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-9-output-5.png){width=951 height=758}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## Bloco 2: Políticas de Permanência (IES Públicas)\n\n::: callout-note\n## Escopo Amostral\n\nOs auxílios de permanência (PNAES) são concentrados nas IES públicas. Portanto, analisamos o efeito desses auxílios comparando beneficiários com não-beneficiários dentro das instituições públicas.\n:::\n\n### Auxílio Permanência (IES Públicas)\n\n::: {#6754c85a .cell execution_count=9}\n``` {.python .cell-code}\nresultado_aux_perm = run_psm_analysis(\n    df_publicas, 'aux_perm', resultado, covariates_base, \n    'Auxílio Permanência (IES Públicas)'\n)\ndisplay_psm_results(resultado_aux_perm)\n\nif 'erro' not in resultado_aux_perm:\n    plot_ps_distribution(resultado_aux_perm['df_psm'], 'aux_perm', 'Auxílio Permanência')\n    plot_love_plot(resultado_aux_perm['df_balance'], 'Auxílio Permanência')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n\n### Resultados: Auxílio Permanência (IES Públicas)\n\n| Métrica | Valor |\n|---------|-------|\n| N Total | 80,651 |\n| N Tratados | 1,568 |\n| N Controles | 79,083 |\n| Nota Média (Tratados) | 43.6029 |\n| Nota Média (Controles Pareados) | 35.2950 |\n| **ATT (Efeito Causal)** | **8.3079** |\n| P-valor | 0.0000 |\n| Significante (α=0.05) | ✅ |\n| Covariáveis Equilibradas | 16/16 (100%) |\n\n:::\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n#### Modelo Logit para Propensity Score\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<table class=\"simpletable\">\n<caption>Logit Regression Results</caption>\n<tr>\n  <th>Dep. Variable:</th>       <td>aux_perm</td>     <th>  No. Observations:  </th>  <td> 80651</td> \n</tr>\n<tr>\n  <th>Model:</th>                 <td>Logit</td>      <th>  Df Residuals:      </th>  <td> 80634</td> \n</tr>\n<tr>\n  <th>Method:</th>                 <td>MLE</td>       <th>  Df Model:          </th>  <td>    16</td> \n</tr>\n<tr>\n  <th>Date:</th>            <td>Tue, 25 Nov 2025</td> <th>  Pseudo R-squ.:     </th>  <td>0.1014</td> \n</tr>\n<tr>\n  <th>Time:</th>                <td>19:55:29</td>     <th>  Log-Likelihood:    </th> <td> -6947.4</td>\n</tr>\n<tr>\n  <th>converged:</th>             <td>False</td>      <th>  LL-Null:           </th> <td> -7731.1</td>\n</tr>\n<tr>\n  <th>Covariance Type:</th>     <td>nonrobust</td>    <th>  LLR p-value:       </th>  <td> 0.000</td> \n</tr>\n</table>\n<table class=\"simpletable\">\n<tr>\n         <td></td>            <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>  \n</tr>\n<tr>\n  <th>const</th>           <td>   -4.2107</td> <td>    0.117</td> <td>  -35.898</td> <td> 0.000</td> <td>   -4.441</td> <td>   -3.981</td>\n</tr>\n<tr>\n  <th>cod_pessoas_res</th> <td>   -0.0109</td> <td>    0.015</td> <td>   -0.704</td> <td> 0.482</td> <td>   -0.041</td> <td>    0.019</td>\n</tr>\n<tr>\n  <th>genero_fem</th>      <td>    0.3195</td> <td>    0.053</td> <td>    6.006</td> <td> 0.000</td> <td>    0.215</td> <td>    0.424</td>\n</tr>\n<tr>\n  <th>cor_preta</th>       <td>    1.0827</td> <td>    0.077</td> <td>   14.016</td> <td> 0.000</td> <td>    0.931</td> <td>    1.234</td>\n</tr>\n<tr>\n  <th>cor_parda</th>       <td>    0.7505</td> <td>    0.057</td> <td>   13.121</td> <td> 0.000</td> <td>    0.638</td> <td>    0.863</td>\n</tr>\n<tr>\n  <th>renda_fx2</th>       <td>   -0.1770</td> <td>    0.063</td> <td>   -2.806</td> <td> 0.005</td> <td>   -0.301</td> <td>   -0.053</td>\n</tr>\n<tr>\n  <th>renda_fx3</th>       <td>   -0.7028</td> <td>    0.076</td> <td>   -9.202</td> <td> 0.000</td> <td>   -0.852</td> <td>   -0.553</td>\n</tr>\n<tr>\n  <th>renda_fx4</th>       <td>   -1.0485</td> <td>    0.104</td> <td>  -10.048</td> <td> 0.000</td> <td>   -1.253</td> <td>   -0.844</td>\n</tr>\n<tr>\n  <th>renda_fx5</th>       <td>   -1.7058</td> <td>    0.137</td> <td>  -12.444</td> <td> 0.000</td> <td>   -1.974</td> <td>   -1.437</td>\n</tr>\n<tr>\n  <th>em_maioria_pub</th>  <td>   -1.0033</td> <td>    0.188</td> <td>   -5.337</td> <td> 0.000</td> <td>   -1.372</td> <td>   -0.635</td>\n</tr>\n<tr>\n  <th>em_metade_pub</th>   <td>   -0.9129</td> <td>    0.414</td> <td>   -2.207</td> <td> 0.027</td> <td>   -1.724</td> <td>   -0.102</td>\n</tr>\n<tr>\n  <th>em_maioria_priv</th> <td>   -0.8675</td> <td>    0.178</td> <td>   -4.887</td> <td> 0.000</td> <td>   -1.215</td> <td>   -0.520</td>\n</tr>\n<tr>\n  <th>em_total_priv</th>   <td>   -1.4887</td> <td>    0.090</td> <td>  -16.475</td> <td> 0.000</td> <td>   -1.666</td> <td>   -1.312</td>\n</tr>\n<tr>\n  <th>esc_resp_f1</th>     <td>    0.5539</td> <td>    0.119</td> <td>    4.672</td> <td> 0.000</td> <td>    0.322</td> <td>    0.786</td>\n</tr>\n<tr>\n  <th>esc_resp_f2</th>     <td>    0.8220</td> <td>    0.119</td> <td>    6.880</td> <td> 0.000</td> <td>    0.588</td> <td>    1.056</td>\n</tr>\n<tr>\n  <th>esc_resp_em</th>     <td>    0.7641</td> <td>    0.110</td> <td>    6.969</td> <td> 0.000</td> <td>    0.549</td> <td>    0.979</td>\n</tr>\n<tr>\n  <th>esc_resp_sup</th>    <td>    0.3600</td> <td>    0.125</td> <td>    2.884</td> <td> 0.004</td> <td>    0.115</td> <td>    0.605</td>\n</tr>\n</table>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-10-output-4.png){width=951 height=469}\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-10-output-5.png){width=951 height=758}\n:::\n:::\n\n\n### Auxílio Alimentação (IES Públicas)\n\n::: {#46c5dfe1 .cell execution_count=10}\n``` {.python .cell-code}\nresultado_aux_alim = run_psm_analysis(\n    df_publicas, 'aux_alim', resultado, covariates_base,\n    'Auxílio Alimentação (IES Públicas)'\n)\ndisplay_psm_results(resultado_aux_alim)\n\nif 'erro' not in resultado_aux_alim:\n    plot_ps_distribution(resultado_aux_alim['df_psm'], 'aux_alim', 'Auxílio Alimentação')\n    plot_love_plot(resultado_aux_alim['df_balance'], 'Auxílio Alimentação')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n\n### Resultados: Auxílio Alimentação (IES Públicas)\n\n| Métrica | Valor |\n|---------|-------|\n| N Total | 80,651 |\n| N Tratados | 1,234 |\n| N Controles | 79,417 |\n| Nota Média (Tratados) | 43.5833 |\n| Nota Média (Controles Pareados) | 37.7335 |\n| **ATT (Efeito Causal)** | **5.8498** |\n| P-valor | 0.0000 |\n| Significante (α=0.05) | ✅ |\n| Covariáveis Equilibradas | 16/16 (100%) |\n\n:::\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n#### Modelo Logit para Propensity Score\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<table class=\"simpletable\">\n<caption>Logit Regression Results</caption>\n<tr>\n  <th>Dep. Variable:</th>       <td>aux_alim</td>     <th>  No. Observations:  </th>   <td> 80651</td>  \n</tr>\n<tr>\n  <th>Model:</th>                 <td>Logit</td>      <th>  Df Residuals:      </th>   <td> 80634</td>  \n</tr>\n<tr>\n  <th>Method:</th>                 <td>MLE</td>       <th>  Df Model:          </th>   <td>    16</td>  \n</tr>\n<tr>\n  <th>Date:</th>            <td>Tue, 25 Nov 2025</td> <th>  Pseudo R-squ.:     </th>   <td>0.06132</td> \n</tr>\n<tr>\n  <th>Time:</th>                <td>19:55:31</td>     <th>  Log-Likelihood:    </th>  <td> -5991.1</td> \n</tr>\n<tr>\n  <th>converged:</th>             <td>False</td>      <th>  LL-Null:           </th>  <td> -6382.5</td> \n</tr>\n<tr>\n  <th>Covariance Type:</th>     <td>nonrobust</td>    <th>  LLR p-value:       </th> <td>2.963e-156</td>\n</tr>\n</table>\n<table class=\"simpletable\">\n<tr>\n         <td></td>            <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>  \n</tr>\n<tr>\n  <th>const</th>           <td>   -4.5033</td> <td>    0.134</td> <td>  -33.710</td> <td> 0.000</td> <td>   -4.765</td> <td>   -4.241</td>\n</tr>\n<tr>\n  <th>cod_pessoas_res</th> <td>   -0.0397</td> <td>    0.018</td> <td>   -2.234</td> <td> 0.026</td> <td>   -0.075</td> <td>   -0.005</td>\n</tr>\n<tr>\n  <th>genero_fem</th>      <td>    0.1720</td> <td>    0.059</td> <td>    2.927</td> <td> 0.003</td> <td>    0.057</td> <td>    0.287</td>\n</tr>\n<tr>\n  <th>cor_preta</th>       <td>    0.4693</td> <td>    0.096</td> <td>    4.897</td> <td> 0.000</td> <td>    0.281</td> <td>    0.657</td>\n</tr>\n<tr>\n  <th>cor_parda</th>       <td>    0.3785</td> <td>    0.062</td> <td>    6.074</td> <td> 0.000</td> <td>    0.256</td> <td>    0.501</td>\n</tr>\n<tr>\n  <th>renda_fx2</th>       <td>    0.2248</td> <td>    0.075</td> <td>    3.002</td> <td> 0.003</td> <td>    0.078</td> <td>    0.372</td>\n</tr>\n<tr>\n  <th>renda_fx3</th>       <td>   -0.2012</td> <td>    0.085</td> <td>   -2.363</td> <td> 0.018</td> <td>   -0.368</td> <td>   -0.034</td>\n</tr>\n<tr>\n  <th>renda_fx4</th>       <td>   -0.6532</td> <td>    0.115</td> <td>   -5.684</td> <td> 0.000</td> <td>   -0.879</td> <td>   -0.428</td>\n</tr>\n<tr>\n  <th>renda_fx5</th>       <td>   -1.2995</td> <td>    0.145</td> <td>   -8.989</td> <td> 0.000</td> <td>   -1.583</td> <td>   -1.016</td>\n</tr>\n<tr>\n  <th>em_maioria_pub</th>  <td>   -0.6393</td> <td>    0.183</td> <td>   -3.502</td> <td> 0.000</td> <td>   -0.997</td> <td>   -0.282</td>\n</tr>\n<tr>\n  <th>em_metade_pub</th>   <td>   -0.7951</td> <td>    0.450</td> <td>   -1.769</td> <td> 0.077</td> <td>   -1.676</td> <td>    0.086</td>\n</tr>\n<tr>\n  <th>em_maioria_priv</th> <td>   -0.6455</td> <td>    0.188</td> <td>   -3.441</td> <td> 0.001</td> <td>   -1.013</td> <td>   -0.278</td>\n</tr>\n<tr>\n  <th>em_total_priv</th>   <td>   -1.0193</td> <td>    0.089</td> <td>  -11.444</td> <td> 0.000</td> <td>   -1.194</td> <td>   -0.845</td>\n</tr>\n<tr>\n  <th>esc_resp_f1</th>     <td>    0.8398</td> <td>    0.133</td> <td>    6.298</td> <td> 0.000</td> <td>    0.578</td> <td>    1.101</td>\n</tr>\n<tr>\n  <th>esc_resp_f2</th>     <td>    0.7903</td> <td>    0.138</td> <td>    5.712</td> <td> 0.000</td> <td>    0.519</td> <td>    1.061</td>\n</tr>\n<tr>\n  <th>esc_resp_em</th>     <td>    0.7796</td> <td>    0.125</td> <td>    6.220</td> <td> 0.000</td> <td>    0.534</td> <td>    1.025</td>\n</tr>\n<tr>\n  <th>esc_resp_sup</th>    <td>    0.4434</td> <td>    0.139</td> <td>    3.197</td> <td> 0.001</td> <td>    0.172</td> <td>    0.715</td>\n</tr>\n</table>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-11-output-4.png){width=951 height=469}\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-11-output-5.png){width=951 height=758}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## Bloco 3: Efeito da Gratuidade com Auxílios de Permanência\n\n::: callout-important\n## Estratégia de Identificação\n\nComparamos estudantes com **curso gratuito** que:\n\n-   **Grupo Tratamento**: Estudantes de IES públicas que recebem auxílio de permanência/alimentação\n-   **Grupo Controle**: Estudantes ProUni Integral em IES privadas que **não** recebem auxílio de permanência/alimentação\n\nEsta estratégia responde: *\"O recebimento de auxílios de permanência/alimentação nas IES públicas melhora o desempenho em comparação com estudantes ProUni Integral sem auxílios?\"*\n:::\n\n### Auxílio Permanência: IES Públicas (com auxílio) vs ProUni Integral (sem auxílio)\n\n::: {#7a685db6 .cell execution_count=11}\n``` {.python .cell-code}\n# Tratados: Estudantes de IES públicas COM auxílio permanência\ndf_pub_com_aux_perm = df_publicas[df_publicas['aux_perm'] == 1].copy()\ndf_pub_com_aux_perm['tratamento'] = 1\n\n# Controles: Estudantes ProUni Integral SEM auxílio permanência\ndf_prouni_sem_aux_perm = df_privadas[\n    (df_privadas['prouni_int'] == 1) & \n    (df_privadas['aux_perm'] == 0)\n].copy()\ndf_prouni_sem_aux_perm['tratamento'] = 0\n\ndf_analise_bloco3_perm = pd.concat([df_pub_com_aux_perm, df_prouni_sem_aux_perm])\n\nresultado_aux_perm_gratuito = run_psm_analysis(\n    df_analise_bloco3_perm, 'tratamento', resultado, covariates_base,\n    'Aux. Permanência (Públicas) vs ProUni Integral (sem auxílio)'\n)\ndisplay_psm_results(resultado_aux_perm_gratuito)\n\nif 'erro' not in resultado_aux_perm_gratuito:\n    plot_ps_distribution(resultado_aux_perm_gratuito['df_psm'], 'tratamento', 'Aux. Perm. Públicas vs ProUni Int.')\n    plot_love_plot(resultado_aux_perm_gratuito['df_balance'], 'Aux. Perm. Públicas vs ProUni Int.')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n\n### Resultados: Aux. Permanência (Públicas) vs ProUni Integral (sem auxílio)\n\n| Métrica | Valor |\n|---------|-------|\n| N Total | 10,750 |\n| N Tratados | 1,568 |\n| N Controles | 9,182 |\n| Nota Média (Tratados) | 43.6029 |\n| Nota Média (Controles Pareados) | 43.4647 |\n| **ATT (Efeito Causal)** | **0.1382** |\n| P-valor | 0.7706 |\n| Significante (α=0.05) | ❌ |\n| Covariáveis Equilibradas | 16/16 (100%) |\n\n:::\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n#### Modelo Logit para Propensity Score\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<table class=\"simpletable\">\n<caption>Logit Regression Results</caption>\n<tr>\n  <th>Dep. Variable:</th>      <td>tratamento</td>    <th>  No. Observations:  </th>   <td> 10750</td>  \n</tr>\n<tr>\n  <th>Model:</th>                 <td>Logit</td>      <th>  Df Residuals:      </th>   <td> 10733</td>  \n</tr>\n<tr>\n  <th>Method:</th>                 <td>MLE</td>       <th>  Df Model:          </th>   <td>    16</td>  \n</tr>\n<tr>\n  <th>Date:</th>            <td>Tue, 25 Nov 2025</td> <th>  Pseudo R-squ.:     </th>   <td>0.06468</td> \n</tr>\n<tr>\n  <th>Time:</th>                <td>19:55:32</td>     <th>  Log-Likelihood:    </th>  <td> -4177.3</td> \n</tr>\n<tr>\n  <th>converged:</th>             <td>False</td>      <th>  LL-Null:           </th>  <td> -4466.2</td> \n</tr>\n<tr>\n  <th>Covariance Type:</th>     <td>nonrobust</td>    <th>  LLR p-value:       </th> <td>1.206e-112</td>\n</tr>\n</table>\n<table class=\"simpletable\">\n<tr>\n         <td></td>            <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>  \n</tr>\n<tr>\n  <th>const</th>           <td>   -0.7415</td> <td>    0.137</td> <td>   -5.394</td> <td> 0.000</td> <td>   -1.011</td> <td>   -0.472</td>\n</tr>\n<tr>\n  <th>cod_pessoas_res</th> <td>   -0.1149</td> <td>    0.018</td> <td>   -6.422</td> <td> 0.000</td> <td>   -0.150</td> <td>   -0.080</td>\n</tr>\n<tr>\n  <th>genero_fem</th>      <td>    0.1063</td> <td>    0.058</td> <td>    1.834</td> <td> 0.067</td> <td>   -0.007</td> <td>    0.220</td>\n</tr>\n<tr>\n  <th>cor_preta</th>       <td>    0.5144</td> <td>    0.085</td> <td>    6.054</td> <td> 0.000</td> <td>    0.348</td> <td>    0.681</td>\n</tr>\n<tr>\n  <th>cor_parda</th>       <td>    0.4640</td> <td>    0.062</td> <td>    7.475</td> <td> 0.000</td> <td>    0.342</td> <td>    0.586</td>\n</tr>\n<tr>\n  <th>renda_fx2</th>       <td>   -0.8447</td> <td>    0.069</td> <td>  -12.179</td> <td> 0.000</td> <td>   -0.981</td> <td>   -0.709</td>\n</tr>\n<tr>\n  <th>renda_fx3</th>       <td>   -1.1180</td> <td>    0.084</td> <td>  -13.340</td> <td> 0.000</td> <td>   -1.282</td> <td>   -0.954</td>\n</tr>\n<tr>\n  <th>renda_fx4</th>       <td>   -1.0547</td> <td>    0.116</td> <td>   -9.071</td> <td> 0.000</td> <td>   -1.283</td> <td>   -0.827</td>\n</tr>\n<tr>\n  <th>renda_fx5</th>       <td>   -0.9420</td> <td>    0.145</td> <td>   -6.483</td> <td> 0.000</td> <td>   -1.227</td> <td>   -0.657</td>\n</tr>\n<tr>\n  <th>em_maioria_pub</th>  <td>    0.1351</td> <td>    0.206</td> <td>    0.657</td> <td> 0.511</td> <td>   -0.268</td> <td>    0.538</td>\n</tr>\n<tr>\n  <th>em_metade_pub</th>   <td>   -2.0207</td> <td>    1.233</td> <td>   -1.639</td> <td> 0.101</td> <td>   -4.437</td> <td>    0.395</td>\n</tr>\n<tr>\n  <th>em_maioria_priv</th> <td>    1.3372</td> <td>    0.223</td> <td>    5.996</td> <td> 0.000</td> <td>    0.900</td> <td>    1.774</td>\n</tr>\n<tr>\n  <th>em_total_priv</th>   <td>    1.1782</td> <td>    0.107</td> <td>   11.023</td> <td> 0.000</td> <td>    0.969</td> <td>    1.388</td>\n</tr>\n<tr>\n  <th>esc_resp_f1</th>     <td>   -0.5521</td> <td>    0.131</td> <td>   -4.221</td> <td> 0.000</td> <td>   -0.808</td> <td>   -0.296</td>\n</tr>\n<tr>\n  <th>esc_resp_f2</th>     <td>   -0.4537</td> <td>    0.132</td> <td>   -3.445</td> <td> 0.001</td> <td>   -0.712</td> <td>   -0.196</td>\n</tr>\n<tr>\n  <th>esc_resp_em</th>     <td>   -0.3969</td> <td>    0.123</td> <td>   -3.233</td> <td> 0.001</td> <td>   -0.637</td> <td>   -0.156</td>\n</tr>\n<tr>\n  <th>esc_resp_sup</th>    <td>   -0.3091</td> <td>    0.142</td> <td>   -2.173</td> <td> 0.030</td> <td>   -0.588</td> <td>   -0.030</td>\n</tr>\n</table>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-12-output-4.png){width=951 height=469}\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-12-output-5.png){width=950 height=758}\n:::\n:::\n\n\n### Auxílio Alimentação: IES Públicas (com auxílio) vs ProUni Integral (sem auxílio)\n\n::: {#f014e48c .cell execution_count=12}\n``` {.python .cell-code}\n# Tratados: Estudantes de IES públicas COM auxílio alimentação\ndf_pub_com_aux_alim = df_publicas[df_publicas['aux_alim'] == 1].copy()\ndf_pub_com_aux_alim['tratamento'] = 1\n\n# Controles: Estudantes ProUni Integral SEM auxílio alimentação\ndf_prouni_sem_aux_alim = df_privadas[\n    (df_privadas['prouni_int'] == 1) & \n    (df_privadas['aux_alim'] == 0)\n].copy()\ndf_prouni_sem_aux_alim['tratamento'] = 0\n\ndf_analise_bloco3_alim = pd.concat([df_pub_com_aux_alim, df_prouni_sem_aux_alim])\n\nresultado_aux_alim_gratuito = run_psm_analysis(\n    df_analise_bloco3_alim, 'tratamento', resultado, covariates_base,\n    'Aux. Alimentação (Públicas) vs ProUni Integral (sem auxílio)'\n)\ndisplay_psm_results(resultado_aux_alim_gratuito)\n\nif 'erro' not in resultado_aux_alim_gratuito:\n    plot_ps_distribution(resultado_aux_alim_gratuito['df_psm'], 'tratamento', 'Aux. Alim. Públicas vs ProUni Int.')\n    plot_love_plot(resultado_aux_alim_gratuito['df_balance'], 'Aux. Alim. Públicas vs ProUni Int.')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n\n### Resultados: Aux. Alimentação (Públicas) vs ProUni Integral (sem auxílio)\n\n| Métrica | Valor |\n|---------|-------|\n| N Total | 10,418 |\n| N Tratados | 1,234 |\n| N Controles | 9,184 |\n| Nota Média (Tratados) | 43.5833 |\n| Nota Média (Controles Pareados) | 42.3295 |\n| **ATT (Efeito Causal)** | **1.2538** |\n| P-valor | 0.0212 |\n| Significante (α=0.05) | ✅ |\n| Covariáveis Equilibradas | 16/16 (100%) |\n\n:::\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n#### Modelo Logit para Propensity Score\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<table class=\"simpletable\">\n<caption>Logit Regression Results</caption>\n<tr>\n  <th>Dep. Variable:</th>      <td>tratamento</td>    <th>  No. Observations:  </th>  <td> 10418</td>  \n</tr>\n<tr>\n  <th>Model:</th>                 <td>Logit</td>      <th>  Df Residuals:      </th>  <td> 10401</td>  \n</tr>\n<tr>\n  <th>Method:</th>                 <td>MLE</td>       <th>  Df Model:          </th>  <td>    16</td>  \n</tr>\n<tr>\n  <th>Date:</th>            <td>Tue, 25 Nov 2025</td> <th>  Pseudo R-squ.:     </th>  <td>0.05780</td> \n</tr>\n<tr>\n  <th>Time:</th>                <td>19:55:33</td>     <th>  Log-Likelihood:    </th> <td> -3571.2</td> \n</tr>\n<tr>\n  <th>converged:</th>             <td>False</td>      <th>  LL-Null:           </th> <td> -3790.3</td> \n</tr>\n<tr>\n  <th>Covariance Type:</th>     <td>nonrobust</td>    <th>  LLR p-value:       </th> <td>3.612e-83</td>\n</tr>\n</table>\n<table class=\"simpletable\">\n<tr>\n         <td></td>            <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>  \n</tr>\n<tr>\n  <th>const</th>           <td>   -1.1070</td> <td>    0.155</td> <td>   -7.126</td> <td> 0.000</td> <td>   -1.411</td> <td>   -0.803</td>\n</tr>\n<tr>\n  <th>cod_pessoas_res</th> <td>   -0.1550</td> <td>    0.020</td> <td>   -7.591</td> <td> 0.000</td> <td>   -0.195</td> <td>   -0.115</td>\n</tr>\n<tr>\n  <th>genero_fem</th>      <td>   -0.0216</td> <td>    0.063</td> <td>   -0.341</td> <td> 0.733</td> <td>   -0.146</td> <td>    0.103</td>\n</tr>\n<tr>\n  <th>cor_preta</th>       <td>   -0.0076</td> <td>    0.102</td> <td>   -0.075</td> <td> 0.940</td> <td>   -0.207</td> <td>    0.192</td>\n</tr>\n<tr>\n  <th>cor_parda</th>       <td>    0.1093</td> <td>    0.067</td> <td>    1.623</td> <td> 0.105</td> <td>   -0.023</td> <td>    0.241</td>\n</tr>\n<tr>\n  <th>renda_fx2</th>       <td>   -0.4950</td> <td>    0.081</td> <td>   -6.141</td> <td> 0.000</td> <td>   -0.653</td> <td>   -0.337</td>\n</tr>\n<tr>\n  <th>renda_fx3</th>       <td>   -0.6556</td> <td>    0.093</td> <td>   -7.025</td> <td> 0.000</td> <td>   -0.839</td> <td>   -0.473</td>\n</tr>\n<tr>\n  <th>renda_fx4</th>       <td>   -0.5964</td> <td>    0.126</td> <td>   -4.751</td> <td> 0.000</td> <td>   -0.842</td> <td>   -0.350</td>\n</tr>\n<tr>\n  <th>renda_fx5</th>       <td>   -0.7180</td> <td>    0.162</td> <td>   -4.422</td> <td> 0.000</td> <td>   -1.036</td> <td>   -0.400</td>\n</tr>\n<tr>\n  <th>em_maioria_pub</th>  <td>    0.4967</td> <td>    0.202</td> <td>    2.462</td> <td> 0.014</td> <td>    0.101</td> <td>    0.892</td>\n</tr>\n<tr>\n  <th>em_metade_pub</th>   <td>   -1.9204</td> <td>    1.352</td> <td>   -1.420</td> <td> 0.155</td> <td>   -4.570</td> <td>    0.729</td>\n</tr>\n<tr>\n  <th>em_maioria_priv</th> <td>    1.6371</td> <td>    0.224</td> <td>    7.315</td> <td> 0.000</td> <td>    1.199</td> <td>    2.076</td>\n</tr>\n<tr>\n  <th>em_total_priv</th>   <td>    1.5687</td> <td>    0.104</td> <td>   15.057</td> <td> 0.000</td> <td>    1.365</td> <td>    1.773</td>\n</tr>\n<tr>\n  <th>esc_resp_f1</th>     <td>   -0.1564</td> <td>    0.147</td> <td>   -1.063</td> <td> 0.288</td> <td>   -0.445</td> <td>    0.132</td>\n</tr>\n<tr>\n  <th>esc_resp_f2</th>     <td>   -0.3570</td> <td>    0.151</td> <td>   -2.357</td> <td> 0.018</td> <td>   -0.654</td> <td>   -0.060</td>\n</tr>\n<tr>\n  <th>esc_resp_em</th>     <td>   -0.2440</td> <td>    0.140</td> <td>   -1.742</td> <td> 0.082</td> <td>   -0.519</td> <td>    0.031</td>\n</tr>\n<tr>\n  <th>esc_resp_sup</th>    <td>   -0.1265</td> <td>    0.158</td> <td>   -0.799</td> <td> 0.425</td> <td>   -0.437</td> <td>    0.184</td>\n</tr>\n</table>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-13-output-4.png){width=951 height=469}\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-13-output-5.png){width=951 height=758}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## Análise Estratificada por Curso (Blocos 1, 2 e 3)\n\n::: callout-note\n## Objetivo\n\nVerificar se os efeitos das políticas de inclusão (Bloco 1), permanência (Bloco 2) e gratuidade com auxílios (Bloco 3) variam entre os cursos de Administração, Ciências Econômicas e Ciências Contábeis.\n:::\n\n::: {#8143e5f5 .cell execution_count=13}\n``` {.python .cell-code code-fold=\"true\" code-summary=\"Expandir funções de análise por curso\"}\ndef run_psm_vs_pagantes_by_course(df_tratados, df_pagantes, nome_politica):\n    \"\"\"Executa PSM comparando tratados com pagantes por curso.\"\"\"\n    resultados = {}\n    \n    for cod_curso, nome_curso in MAP_CURSO.items():\n        df_trat_curso = df_tratados[df_tratados['cod_grupo'] == cod_curso].copy()\n        df_trat_curso['tratamento'] = 1\n        \n        df_ctrl_curso = df_pagantes[df_pagantes['cod_grupo'] == cod_curso].copy()\n        df_ctrl_curso['tratamento'] = 0\n        \n        df_analise = pd.concat([df_trat_curso, df_ctrl_curso])\n        \n        resultado_psm = run_psm_analysis(\n            df_analise, 'tratamento', resultado, covariates_base, \n            f'{nome_politica} - {nome_curso}',\n            min_tratados=20,\n            show_logit=False\n        )\n        resultados[nome_curso] = resultado_psm\n    \n    return resultados\n\n\ndef display_course_comparison(resultados_por_curso, nome_politica):\n    \"\"\"Exibe tabela comparativa entre cursos.\"\"\"\n    rows = []\n    for curso, res in resultados_por_curso.items():\n        if 'erro' not in res:\n            rows.append({\n                'Curso': curso,\n                'N Tratados': res['n_tratados'],\n                'ATT': round(res['att'], 4),\n                'P-valor': round(res['p_valor'], 4),\n                'Sig.': '✅' if res['significante'] else '❌',\n                'Equil.': f\"{res['pct_equilibradas']:.0f}%\"\n            })\n        else:\n            rows.append({\n                'Curso': curso,\n                'N Tratados': '-',\n                'ATT': '-',\n                'P-valor': '-',\n                'Sig.': '⚠️',\n                'Equil.': '-'\n            })\n    \n    df_comp = pd.DataFrame(rows)\n    display(Markdown(f\"### Comparação por Curso: {nome_politica}\"))\n    display(df_comp)\n    return df_comp\n```\n:::\n\n\n### ProUni Integral por Curso\n\n::: {#2d509c6c .cell execution_count=14}\n``` {.python .cell-code}\ndf_prouni_int_only = df_privadas[df_privadas['prouni_int'] == 1].copy()\nresultados_prouni_curso = run_psm_vs_pagantes_by_course(\n    df_prouni_int_only, df_pagantes, 'ProUni Integral'\n)\ndisplay_course_comparison(resultados_prouni_curso, 'ProUni Integral vs Pagantes')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n### Comparação por Curso: ProUni Integral vs Pagantes\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Curso</th>\n      <th>N Tratados</th>\n      <th>ATT</th>\n      <th>P-valor</th>\n      <th>Sig.</th>\n      <th>Equil.</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Administração</td>\n      <td>6805</td>\n      <td>10.6817</td>\n      <td>0.0</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Ciências Econômicas</td>\n      <td>361</td>\n      <td>6.5970</td>\n      <td>0.0</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Ciências Contábeis</td>\n      <td>2022</td>\n      <td>10.2872</td>\n      <td>0.0</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=14}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Curso</th>\n      <th>N Tratados</th>\n      <th>ATT</th>\n      <th>P-valor</th>\n      <th>Sig.</th>\n      <th>Equil.</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Administração</td>\n      <td>6805</td>\n      <td>10.6817</td>\n      <td>0.0</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Ciências Econômicas</td>\n      <td>361</td>\n      <td>6.5970</td>\n      <td>0.0</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Ciências Contábeis</td>\n      <td>2022</td>\n      <td>10.2872</td>\n      <td>0.0</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n### FIES por Curso\n\n::: {#2c88b22a .cell execution_count=15}\n``` {.python .cell-code}\ndf_fies_only = df_privadas[df_privadas['fies'] == 1].copy()\nresultados_fies_curso = run_psm_vs_pagantes_by_course(\n    df_fies_only, df_pagantes, 'FIES'\n)\ndisplay_course_comparison(resultados_fies_curso, 'FIES vs Pagantes')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n### Comparação por Curso: FIES vs Pagantes\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Curso</th>\n      <th>N Tratados</th>\n      <th>ATT</th>\n      <th>P-valor</th>\n      <th>Sig.</th>\n      <th>Equil.</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Administração</td>\n      <td>6388</td>\n      <td>3.1300</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Ciências Econômicas</td>\n      <td>255</td>\n      <td>0.1404</td>\n      <td>0.9059</td>\n      <td>❌</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Ciências Contábeis</td>\n      <td>2983</td>\n      <td>4.8177</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=15}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Curso</th>\n      <th>N Tratados</th>\n      <th>ATT</th>\n      <th>P-valor</th>\n      <th>Sig.</th>\n      <th>Equil.</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Administração</td>\n      <td>6388</td>\n      <td>3.1300</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Ciências Econômicas</td>\n      <td>255</td>\n      <td>0.1404</td>\n      <td>0.9059</td>\n      <td>❌</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Ciências Contábeis</td>\n      <td>2983</td>\n      <td>4.8177</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n### Auxílio Permanência por Curso (IES Públicas)\n\n::: {#06f7c063 .cell execution_count=16}\n``` {.python .cell-code}\ndef run_psm_by_course_publicas(tratamento, nome_politica):\n    \"\"\"Executa PSM por curso nas IES públicas.\"\"\"\n    resultados = {}\n    \n    for cod_curso, nome_curso in MAP_CURSO.items():\n        df_curso = df_publicas[df_publicas['cod_grupo'] == cod_curso].copy()\n        \n        resultado_psm = run_psm_analysis(\n            df_curso, tratamento, resultado, covariates_base, \n            f'{nome_politica} - {nome_curso}',\n            min_tratados=20,\n            show_logit=False\n        )\n        resultados[nome_curso] = resultado_psm\n    \n    return resultados\n\nresultados_aux_curso = run_psm_by_course_publicas('aux_perm', 'Auxílio Permanência')\ndisplay_course_comparison(resultados_aux_curso, 'Auxílio Permanência (Públicas)')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n### Comparação por Curso: Auxílio Permanência (Públicas)\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Curso</th>\n      <th>N Tratados</th>\n      <th>ATT</th>\n      <th>P-valor</th>\n      <th>Sig.</th>\n      <th>Equil.</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Administração</td>\n      <td>714</td>\n      <td>6.1891</td>\n      <td>0.0</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Ciências Econômicas</td>\n      <td>406</td>\n      <td>5.9404</td>\n      <td>0.0</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Ciências Contábeis</td>\n      <td>448</td>\n      <td>5.7033</td>\n      <td>0.0</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=16}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Curso</th>\n      <th>N Tratados</th>\n      <th>ATT</th>\n      <th>P-valor</th>\n      <th>Sig.</th>\n      <th>Equil.</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Administração</td>\n      <td>714</td>\n      <td>6.1891</td>\n      <td>0.0</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Ciências Econômicas</td>\n      <td>406</td>\n      <td>5.9404</td>\n      <td>0.0</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Ciências Contábeis</td>\n      <td>448</td>\n      <td>5.7033</td>\n      <td>0.0</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n### Auxílio Permanência por Curso: Públicas vs ProUni Integral (Bloco 3)\n\n::: {#e599ddf5 .cell execution_count=17}\n``` {.python .cell-code}\ndef run_psm_bloco3_by_course(auxilio_var, nome_auxilio):\n    \"\"\"Executa PSM por curso comparando públicas com auxílio vs ProUni Integral sem auxílio.\"\"\"\n    resultados = {}\n    \n    for cod_curso, nome_curso in MAP_CURSO.items():\n        # Tratados: IES públicas COM auxílio\n        df_trat = df_publicas[\n            (df_publicas['cod_grupo'] == cod_curso) & \n            (df_publicas[auxilio_var] == 1)\n        ].copy()\n        df_trat['tratamento'] = 1\n        \n        # Controles: ProUni Integral SEM auxílio\n        df_ctrl = df_privadas[\n            (df_privadas['cod_grupo'] == cod_curso) & \n            (df_privadas['prouni_int'] == 1) & \n            (df_privadas[auxilio_var] == 0)\n        ].copy()\n        df_ctrl['tratamento'] = 0\n        \n        df_analise = pd.concat([df_trat, df_ctrl])\n        \n        resultado_psm = run_psm_analysis(\n            df_analise, 'tratamento', resultado, covariates_base, \n            f'{nome_auxilio} Públicas vs ProUni Int. - {nome_curso}',\n            min_tratados=20,\n            show_logit=False\n        )\n        resultados[nome_curso] = resultado_psm\n    \n    return resultados\n\nresultados_bloco3_perm_curso = run_psm_bloco3_by_course('aux_perm', 'Aux. Permanência')\ndisplay_course_comparison(resultados_bloco3_perm_curso, 'Aux. Permanência (Públicas) vs ProUni Integral')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n### Comparação por Curso: Aux. Permanência (Públicas) vs ProUni Integral\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Curso</th>\n      <th>N Tratados</th>\n      <th>ATT</th>\n      <th>P-valor</th>\n      <th>Sig.</th>\n      <th>Equil.</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Administração</td>\n      <td>714</td>\n      <td>1.7805</td>\n      <td>0.0104</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Ciências Econômicas</td>\n      <td>406</td>\n      <td>1.1734</td>\n      <td>0.1769</td>\n      <td>❌</td>\n      <td>75%</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Ciências Contábeis</td>\n      <td>448</td>\n      <td>5.8717</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=17}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Curso</th>\n      <th>N Tratados</th>\n      <th>ATT</th>\n      <th>P-valor</th>\n      <th>Sig.</th>\n      <th>Equil.</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Administração</td>\n      <td>714</td>\n      <td>1.7805</td>\n      <td>0.0104</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Ciências Econômicas</td>\n      <td>406</td>\n      <td>1.1734</td>\n      <td>0.1769</td>\n      <td>❌</td>\n      <td>75%</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Ciências Contábeis</td>\n      <td>448</td>\n      <td>5.8717</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n### Auxílio Alimentação por Curso: Públicas vs ProUni Integral (Bloco 3)\n\n::: {#4a10e17a .cell execution_count=18}\n``` {.python .cell-code}\nresultados_bloco3_alim_curso = run_psm_bloco3_by_course('aux_alim', 'Aux. Alimentação')\ndisplay_course_comparison(resultados_bloco3_alim_curso, 'Aux. Alimentação (Públicas) vs ProUni Integral')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n### Comparação por Curso: Aux. Alimentação (Públicas) vs ProUni Integral\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Curso</th>\n      <th>N Tratados</th>\n      <th>ATT</th>\n      <th>P-valor</th>\n      <th>Sig.</th>\n      <th>Equil.</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Administração</td>\n      <td>562</td>\n      <td>2.9920</td>\n      <td>0.0003</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Ciências Econômicas</td>\n      <td>271</td>\n      <td>1.5557</td>\n      <td>0.1575</td>\n      <td>❌</td>\n      <td>56%</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Ciências Contábeis</td>\n      <td>401</td>\n      <td>2.3042</td>\n      <td>0.0185</td>\n      <td>✅</td>\n      <td>94%</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=18}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Curso</th>\n      <th>N Tratados</th>\n      <th>ATT</th>\n      <th>P-valor</th>\n      <th>Sig.</th>\n      <th>Equil.</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Administração</td>\n      <td>562</td>\n      <td>2.9920</td>\n      <td>0.0003</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Ciências Econômicas</td>\n      <td>271</td>\n      <td>1.5557</td>\n      <td>0.1575</td>\n      <td>❌</td>\n      <td>56%</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Ciências Contábeis</td>\n      <td>401</td>\n      <td>2.3042</td>\n      <td>0.0185</td>\n      <td>✅</td>\n      <td>94%</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## Síntese dos Resultados\n\n::: {#eb15152b .cell execution_count=19}\n``` {.python .cell-code}\ntodos_resultados = [\n    ('ProUni Integral vs Pagantes', resultado_prouni_int, 'Privadas'),\n    ('ProUni Parcial vs Pagantes', resultado_prouni_par, 'Privadas'),\n    ('FIES vs Pagantes', resultado_fies, 'Privadas'),\n    ('ProUni + FIES vs Pagantes', resultado_prouni_fies, 'Privadas'),\n    ('Aux. Permanência', resultado_aux_perm, 'Públicas'),\n    ('Aux. Alimentação', resultado_aux_alim, 'Públicas'),\n    ('Aux. Perm. (Púb. vs ProUni)', resultado_aux_perm_gratuito, 'Gratuidade'),\n    ('Aux. Alim. (Púb. vs ProUni)', resultado_aux_alim_gratuito, 'Gratuidade'),\n]\n\nrows_sintese = []\nfor nome, res, amostra in todos_resultados:\n    if 'erro' not in res:\n        rows_sintese.append({\n            'Política': nome,\n            'Amostra': amostra,\n            'N Tratados': res['n_tratados'],\n            'ATT': round(res['att'], 4),\n            'P-valor': round(res['p_valor'], 4),\n            'Sig.': '✅' if res['significante'] else '❌',\n            'Equilíbrio': f\"{res['pct_equilibradas']:.0f}%\"\n        })\n    else:\n        rows_sintese.append({\n            'Política': nome,\n            'Amostra': amostra,\n            'N Tratados': '-',\n            'ATT': '-',\n            'P-valor': '-',\n            'Sig.': '⚠️',\n            'Equilíbrio': '-'\n        })\n\ndf_sintese = pd.DataFrame(rows_sintese)\n\ndisplay(Markdown(\"\"\"\n### Tabela Síntese: Efeitos Estimados (ATT)\n\n**Interpretação:**\n- ATT > 0: Política associada a **aumento** na nota\n- ATT < 0: Política associada a **redução** na nota\n- Sig. ✅: Efeito estatisticamente significante (p < 0.05)\n\n**Grupos de Análise:**\n- **Privadas**: Comparação com estudantes pagantes (sem bolsa/financiamento)\n- **Públicas**: Comparação entre beneficiários e não-beneficiários de auxílios (IES públicas)\n- **Gratuidade**: Efeito de auxílios comparando IES públicas (com auxílio) vs ProUni Integral (sem auxílio)\n\"\"\"))\n\ndisplay(df_sintese)\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n\n### Tabela Síntese: Efeitos Estimados (ATT)\n\n**Interpretação:**\n- ATT > 0: Política associada a **aumento** na nota\n- ATT < 0: Política associada a **redução** na nota\n- Sig. ✅: Efeito estatisticamente significante (p < 0.05)\n\n**Grupos de Análise:**\n- **Privadas**: Comparação com estudantes pagantes (sem bolsa/financiamento)\n- **Públicas**: Comparação entre beneficiários e não-beneficiários de auxílios (IES públicas)\n- **Gratuidade**: Efeito de auxílios comparando IES públicas (com auxílio) vs ProUni Integral (sem auxílio)\n\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Política</th>\n      <th>Amostra</th>\n      <th>N Tratados</th>\n      <th>ATT</th>\n      <th>P-valor</th>\n      <th>Sig.</th>\n      <th>Equilíbrio</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>ProUni Integral vs Pagantes</td>\n      <td>Privadas</td>\n      <td>9188</td>\n      <td>12.3323</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>ProUni Parcial vs Pagantes</td>\n      <td>Privadas</td>\n      <td>4906</td>\n      <td>6.2034</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>FIES vs Pagantes</td>\n      <td>Privadas</td>\n      <td>9626</td>\n      <td>4.3268</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>ProUni + FIES vs Pagantes</td>\n      <td>Privadas</td>\n      <td>1129</td>\n      <td>6.2306</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>Aux. Permanência</td>\n      <td>Públicas</td>\n      <td>1568</td>\n      <td>8.3079</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>Aux. Alimentação</td>\n      <td>Públicas</td>\n      <td>1234</td>\n      <td>5.8498</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>Aux. Perm. (Púb. vs ProUni)</td>\n      <td>Gratuidade</td>\n      <td>1568</td>\n      <td>0.1382</td>\n      <td>0.7706</td>\n      <td>❌</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>Aux. Alim. (Púb. vs ProUni)</td>\n      <td>Gratuidade</td>\n      <td>1234</td>\n      <td>1.2538</td>\n      <td>0.0212</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n::: callout-tip\n## Interpretação dos Resultados\n\n1.  **ATT Positivo e Significante:** Evidência de que a política melhora o desempenho dos beneficiários\n2.  **ATT Negativo e Significante:** Evidência de que a política está associada a menor desempenho (possível viés de seleção residual)\n3.  **ATT Não Significante:** Não há evidência estatística de efeito causal\n4.  **Equilíbrio \\< 100%:** Interpretar com cautela - nem todas as covariáveis foram equilibradas\n:::\n\n------------------------------------------------------------------------\n\n::: callout-warning\n## Limitações da Análise\n\n1.  **Suposição de Seleção nos Observáveis:** O PSM assume que todas as variáveis relevantes para a seleção foram incluídas. Variáveis não observadas (motivação, habilidade inata) podem violar esta suposição.\n\n2.  **Qualidade do Pareamento:** A validade das estimativas depende do equilíbrio alcançado nas covariáveis (SMD \\< 0.1 para todas).\n\n3.  **Validade Externa:** Os resultados se aplicam aos tratados observados na amostra, não necessariamente generalizáveis para toda a população.\n\n4.  **Endogeneidade Temporal:** As políticas podem ter efeitos que se manifestam ao longo do tempo, não capturados em análise transversal.\n:::\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js\" integrity=\"sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js\" integrity=\"sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}