{
  "hash": "e8de811241e6ad3c4668cbc33014a19a",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Avaliação de Impacto Causal com Propensity Score Matching\"\nsubtitle: \"Estimação do Efeito das Políticas de Inclusão e Permanência sobre o Desempenho Acadêmico\"\nexecute:\n  eval: true\n---\n\nPara testar a Hipótese 1, que postula um efeito **causal** das políticas de permanência sobre o desempenho acadêmico, a análise por regressão convencional é insuficiente devido ao problema fundamental de **auto-seleção** [@facure_causal_inference; @huntington_klein_effect].\n\n::: callout-note\n## Objetivo\n\nEstimar o efeito causal das políticas de inclusão (ProUni, FIES) e permanência (auxílios) sobre o desempenho acadêmico no ENADE, utilizando Propensity Score Matching (PSM) para mitigar o viés de seleção.\n:::\n\n## Estrutura das Análises\n\nAs análises estão organizadas em três blocos principais, respeitando a natureza institucional de cada política:\n\n### Bloco 1: Políticas de Inclusão (IES Privadas vs Pagantes)\n\nCada política é comparada com estudantes **pagantes** (sem bolsa/financiamento) nas mesmas IES privadas.\n\n| Tratamento            | Controle                  |\n|-----------------------|---------------------------|\n| ProUni Integral       | Pagantes (sem bolsa/FIES) |\n| ProUni Parcial        | Pagantes (sem bolsa/FIES) |\n| FIES                  | Pagantes (sem bolsa/FIES) |\n| ProUni Parcial + FIES | Pagantes (sem bolsa/FIES) |\n\n### Bloco 2: Políticas de Permanência (IES Públicas)\n\n| Tratamento          | Amostra      |\n|---------------------|--------------|\n| Auxílio Permanência | IES Públicas |\n| Auxílio Alimentação | IES Públicas |\n\n### Bloco 3: Auxílios entre Estudantes com Curso Gratuito\n\nAnalisa o efeito **incremental** dos auxílios de permanência sobre estudantes que já possuem **gratuidade total** (IES públicas + ProUni Integral).\n\n| Tratamento          | Amostra                              |\n|---------------------|--------------------------------------|\n| Auxílio Permanência | Curso Gratuito (Públicas + ProUni)   |\n| Auxílio Alimentação | Curso Gratuito (Públicas + ProUni)   |\n\n------------------------------------------------------------------------\n\n## Configuração e Carga dos Dados\n\n::: {#73522a02 .cell execution_count=1}\n``` {.python .cell-code code-fold=\"true\" code-summary=\"Expandir configuração\"}\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.neighbors import NearestNeighbors\nfrom scipy.stats import ttest_ind\nimport statsmodels.api as sm\nfrom IPython.display import display, Markdown\nimport warnings\nwarnings.filterwarnings('ignore')\n\n# Configurações\nsns.set_style(\"whitegrid\")\nplt.rcParams['figure.figsize'] = (10, 6)\n\n# Paleta de cores do projeto\nPALETTE_MAIN = ['#75A8D9', '#72994E', '#EE6331', '#E7B10A', '#419599', '#447099', '#D44000', '#404041']\n\n# Nível de significância padrão\nALPHA = 0.05\n\n# Mapeamentos\nMAP_CURSO = {1: 'Administração', 13: 'Ciências Econômicas', 22: 'Ciências Contábeis'}\n```\n:::\n\n\n### Carregamento da Base de Dados\n\n::: {#af24be4b .cell execution_count=2}\n``` {.python .cell-code}\ndf_full = pd.read_parquet('dataset/01_enade.parquet')\ndisplay(Markdown(f\"✅ **Dados carregados:** {len(df_full):,} observações\"))\n\n# Criar subconjuntos\ndf_privadas = df_full[df_full['cod_ies_cat'] != 1].copy()\ndf_publicas = df_full[df_full['cod_ies_cat'] == 1].copy()\n\n# Grupo de controle: pagantes sem nenhuma bolsa ou financiamento\ndf_pagantes = df_privadas[\n    (df_privadas['prouni_int'] == 0) & \n    (df_privadas['prouni_par'] == 0) & \n    (df_privadas['fies'] == 0) &\n    (df_privadas['prouni_fies'] == 0)\n].copy()\n\ndisplay(Markdown(f\"\"\"\n### Distribuição da Amostra\n\n| Categoria | N | % |\n|-----------|---:|---:|\n| IES Públicas | {len(df_publicas):,} | {len(df_publicas)/len(df_full)*100:.1f}% |\n| IES Privadas | {len(df_privadas):,} | {len(df_privadas)/len(df_full)*100:.1f}% |\n| Pagantes (Controle) | {len(df_pagantes):,} | {len(df_pagantes)/len(df_privadas)*100:.1f}% das privadas |\n\"\"\"))\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n✅ **Dados carregados:** 301,824 observações\n:::\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n\n### Distribuição da Amostra\n\n| Categoria | N | % |\n|-----------|---:|---:|\n| IES Públicas | 89,335 | 29.6% |\n| IES Privadas | 212,489 | 70.4% |\n| Pagantes (Controle) | 74,589 | 35.1% das privadas |\n\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## Definição das Covariáveis\n\n::: callout-tip\n## Seleção de Covariáveis\n\nA literatura recomenda incluir todas as variáveis associadas **tanto à decisão de tratamento quanto ao resultado**, mesmo que não sejam estatisticamente significantes no modelo Logit [@facure_causal_inference].\n:::\n\n::: {#aaefe759 .cell execution_count=3}\n``` {.python .cell-code}\n# Variável de Resultado\nresultado = 'nt_ger'\n\n# Covariáveis para o Propensity Score\ncovariates_base = [\n    'cod_pessoas_res',\n    'genero_fem',\n    'cor_preta', 'cor_parda',\n    'renda_fx2', 'renda_fx3', 'renda_fx4', 'renda_fx5',\n    'em_maioria_pub', 'em_metade_pub', 'em_maioria_priv', 'em_total_priv',\n    'esc_resp_f1', 'esc_resp_f2', 'esc_resp_em', 'esc_resp_sup'\n]\n\ndisplay(Markdown(f\"**Total de covariáveis:** {len(covariates_base)}\"))\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n**Total de covariáveis:** 16\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## Funções Auxiliares para PSM\n\n::: {#88750150 .cell execution_count=4}\n``` {.python .cell-code code-fold=\"true\" code-summary=\"Expandir funções auxiliares\"}\ndef calculate_smd(df, treatment_col, var_col):\n    \"\"\"Calcula a Diferença de Médias Padronizada (SMD).\"\"\"\n    tratados = df[df[treatment_col] == 1][var_col]\n    controles = df[df[treatment_col] == 0][var_col]\n    \n    if len(tratados) == 0 or len(controles) == 0:\n        return 0\n    \n    mean_diff = tratados.mean() - controles.mean()\n    pooled_std = np.sqrt((tratados.var(ddof=1) + controles.var(ddof=1)) / 2)\n    \n    if pooled_std == 0:\n        return 0\n    return mean_diff / pooled_std\n\n\ndef run_psm_analysis(df, tratamento, resultado, covariates, nome_tratamento, min_tratados=30, show_logit=True):\n    \"\"\"Executa análise completa de PSM para um tratamento específico.\"\"\"\n    colunas = [resultado, tratamento] + covariates\n    df_psm = df[colunas].dropna().copy()\n    \n    n_total = len(df_psm)\n    n_tratados = int(df_psm[tratamento].sum())\n    n_controles = n_total - n_tratados\n    \n    if n_tratados < min_tratados:\n        return {'erro': f'Amostra insuficiente: apenas {n_tratados} tratados (mínimo: {min_tratados})'}\n    \n    if n_controles < min_tratados:\n        return {'erro': f'Amostra insuficiente: apenas {n_controles} controles (mínimo: {min_tratados})'}\n    \n    X = df_psm[covariates]\n    y = df_psm[tratamento]\n    \n    # Modelo Logit com statsmodels para sumário (com tratamento de erro)\n    logit_sm = None\n    try:\n        X_sm = sm.add_constant(X)\n        logit_sm = sm.Logit(y, X_sm).fit(disp=0, method='bfgs', maxiter=100)\n    except Exception as e:\n        # Se falhar, tenta método alternativo ou ignora o sumário\n        try:\n            logit_sm = sm.Logit(y, X_sm).fit(disp=0, method='lbfgs', maxiter=100)\n        except:\n            logit_sm = None  # Sumário não disponível\n    \n    # Sklearn para predição (mais robusto)\n    logit_model = LogisticRegression(max_iter=1000, solver='liblinear', C=1.0)\n    logit_model.fit(X, y)\n    \n    df_psm['propensity_score'] = logit_model.predict_proba(X)[:, 1]\n    \n    tratados = df_psm[df_psm[tratamento] == 1]\n    controles = df_psm[df_psm[tratamento] == 0]\n    \n    nn = NearestNeighbors(n_neighbors=1, algorithm='ball_tree')\n    nn.fit(controles['propensity_score'].values.reshape(-1, 1))\n    distances, indices = nn.kneighbors(tratados['propensity_score'].values.reshape(-1, 1))\n    \n    matched_controles = controles.iloc[indices.flatten()]\n    df_matched = pd.concat([tratados, matched_controles])\n    \n    media_tratados = df_matched[df_matched[tratamento] == 1][resultado].mean()\n    media_controles = df_matched[df_matched[tratamento] == 0][resultado].mean()\n    att = media_tratados - media_controles\n    \n    ttest = ttest_ind(\n        df_matched[df_matched[tratamento] == 1][resultado],\n        df_matched[df_matched[tratamento] == 0][resultado]\n    )\n    \n    balance = []\n    for var in covariates:\n        smd_antes = calculate_smd(df_psm, tratamento, var)\n        smd_depois = calculate_smd(df_matched, tratamento, var)\n        balance.append({\n            'Variável': var,\n            'SMD Antes': round(smd_antes, 4),\n            'SMD Depois': round(smd_depois, 4),\n            'Equilibrado': '✅' if abs(smd_depois) < 0.1 else '⚠️'\n        })\n    \n    df_balance = pd.DataFrame(balance)\n    n_equilibradas = sum(1 for b in balance if b['Equilibrado'] == '✅')\n    \n    return {\n        'nome': nome_tratamento,\n        'n_total': n_total,\n        'n_tratados': n_tratados,\n        'n_controles': n_controles,\n        'media_tratados': media_tratados,\n        'media_controles': media_controles,\n        'att': att,\n        'p_valor': ttest.pvalue,\n        'significante': ttest.pvalue < ALPHA,\n        'df_balance': df_balance,\n        'n_equilibradas': n_equilibradas,\n        'pct_equilibradas': n_equilibradas / len(covariates) * 100,\n        'df_psm': df_psm,\n        'df_matched': df_matched,\n        'logit_summary': logit_sm\n    }\n\n\ndef display_psm_results(resultado_psm, show_logit=True):\n    \"\"\"Exibe resultados do PSM de forma padronizada.\"\"\"\n    if 'erro' in resultado_psm:\n        display(Markdown(f\"⚠️ **{resultado_psm['erro']}**\"))\n        return\n    \n    sig_emoji = '✅' if resultado_psm['significante'] else '❌'\n    \n    display(Markdown(f\"\"\"\n### Resultados: {resultado_psm['nome']}\n\n| Métrica | Valor |\n|---------|-------|\n| N Total | {resultado_psm['n_total']:,} |\n| N Tratados | {resultado_psm['n_tratados']:,} |\n| N Controles | {resultado_psm['n_controles']:,} |\n| Nota Média (Tratados) | {resultado_psm['media_tratados']:.4f} |\n| Nota Média (Controles Pareados) | {resultado_psm['media_controles']:.4f} |\n| **ATT (Efeito Causal)** | **{resultado_psm['att']:.4f}** |\n| P-valor | {resultado_psm['p_valor']:.4f} |\n| Significante (α={ALPHA}) | {sig_emoji} |\n| Covariáveis Equilibradas | {resultado_psm['n_equilibradas']}/{len(resultado_psm['df_balance'])} ({resultado_psm['pct_equilibradas']:.0f}%) |\n\"\"\"))\n    \n    if show_logit and 'logit_summary' in resultado_psm and resultado_psm['logit_summary'] is not None:\n        display(Markdown(\"#### Modelo Logit para Propensity Score\"))\n        display(resultado_psm['logit_summary'].summary())\n\n\ndef plot_love_plot(df_balance, titulo):\n    \"\"\"Gera Love Plot para verificação de equilíbrio.\"\"\"\n    fig, ax = plt.subplots(figsize=(10, 8))\n    y_pos = range(len(df_balance))\n    \n    ax.scatter(df_balance['SMD Antes'], y_pos, color=PALETTE_MAIN[0], \n               marker='o', s=80, label='Antes do Matching', zorder=3)\n    ax.scatter(df_balance['SMD Depois'], y_pos, color=PALETTE_MAIN[2], \n               marker='s', s=80, label='Após o Matching', zorder=3)\n    \n    ax.axvline(0, color='gray', linestyle='--', alpha=0.7)\n    ax.axvline(0.1, color=PALETTE_MAIN[1], linestyle=':', linewidth=2, label='Limiar (±0.1)')\n    ax.axvline(-0.1, color=PALETTE_MAIN[1], linestyle=':', linewidth=2)\n    \n    ax.set_yticks(y_pos)\n    ax.set_yticklabels(df_balance['Variável'])\n    ax.set_xlabel('Diferença de Médias Padronizada (SMD)')\n    ax.set_title(f'Verificação de Equilíbrio - {titulo}', fontweight='bold')\n    ax.legend(loc='lower right')\n    ax.grid(axis='x', alpha=0.3)\n    plt.tight_layout()\n    plt.show()\n\n\ndef plot_ps_distribution(df_psm, tratamento, titulo):\n    \"\"\"Gera gráfico de distribuição dos propensity scores.\"\"\"\n    fig, ax = plt.subplots(figsize=(10, 5))\n    \n    tratados = df_psm[df_psm[tratamento] == 1]['propensity_score']\n    controles = df_psm[df_psm[tratamento] == 0]['propensity_score']\n    \n    ax.hist(controles, bins=50, alpha=0.6, label='Controle', color=PALETTE_MAIN[0], density=True)\n    ax.hist(tratados, bins=50, alpha=0.6, label='Tratamento', color=PALETTE_MAIN[2], density=True)\n    \n    ax.set_xlabel('Propensity Score')\n    ax.set_ylabel('Densidade')\n    ax.set_title(f'Distribuição dos Propensity Scores - {titulo}', fontweight='bold')\n    ax.legend()\n    plt.tight_layout()\n    plt.show()\n```\n:::\n\n\n------------------------------------------------------------------------\n\n## Bloco 1: Políticas de Inclusão (IES Privadas vs Pagantes)\n\n::: callout-important\n## Estratégia de Identificação\n\nCada política de inclusão é comparada com estudantes **pagantes** nas mesmas IES privadas — aqueles que não possuem ProUni, FIES ou outras bolsas. Esta comparação permite isolar o efeito da política controlando por características observáveis.\n:::\n\n### ProUni Integral vs Pagantes\n\n::: {#4aa690d0 .cell execution_count=5}\n``` {.python .cell-code}\n# Tratados: ProUni Integral\ndf_prouni_int = df_privadas[df_privadas['prouni_int'] == 1].copy()\ndf_prouni_int['tratamento'] = 1\n\n# Controles: Pagantes\ndf_controle = df_pagantes.copy()\ndf_controle['tratamento'] = 0\n\ndf_analise1 = pd.concat([df_prouni_int, df_controle])\n\nresultado_prouni_int = run_psm_analysis(\n    df_analise1, 'tratamento', resultado, covariates_base, \n    'ProUni Integral vs Pagantes'\n)\ndisplay_psm_results(resultado_prouni_int)\n\nif 'erro' not in resultado_prouni_int:\n    plot_ps_distribution(resultado_prouni_int['df_psm'], 'tratamento', 'ProUni Integral vs Pagantes')\n    plot_love_plot(resultado_prouni_int['df_balance'], 'ProUni Integral vs Pagantes')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n\n### Resultados: ProUni Integral vs Pagantes\n\n| Métrica | Valor |\n|---------|-------|\n| N Total | 95,202 |\n| N Tratados | 20,720 |\n| N Controles | 74,482 |\n| Nota Média (Tratados) | 45.2927 |\n| Nota Média (Controles Pareados) | 32.0552 |\n| **ATT (Efeito Causal)** | **13.2374** |\n| P-valor | 0.0000 |\n| Significante (α=0.05) | ✅ |\n| Covariáveis Equilibradas | 16/16 (100%) |\n\n:::\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n#### Modelo Logit para Propensity Score\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<table class=\"simpletable\">\n<caption>Logit Regression Results</caption>\n<tr>\n  <th>Dep. Variable:</th>      <td>tratamento</td>    <th>  No. Observations:  </th>  <td> 95202</td> \n</tr>\n<tr>\n  <th>Model:</th>                 <td>Logit</td>      <th>  Df Residuals:      </th>  <td> 95185</td> \n</tr>\n<tr>\n  <th>Method:</th>                 <td>MLE</td>       <th>  Df Model:          </th>  <td>    16</td> \n</tr>\n<tr>\n  <th>Date:</th>            <td>Tue, 25 Nov 2025</td> <th>  Pseudo R-squ.:     </th>  <td>0.1362</td> \n</tr>\n<tr>\n  <th>Time:</th>                <td>18:02:58</td>     <th>  Log-Likelihood:    </th> <td> -43084.</td>\n</tr>\n<tr>\n  <th>converged:</th>             <td>False</td>      <th>  LL-Null:           </th> <td> -49877.</td>\n</tr>\n<tr>\n  <th>Covariance Type:</th>     <td>nonrobust</td>    <th>  LLR p-value:       </th>  <td> 0.000</td> \n</tr>\n</table>\n<table class=\"simpletable\">\n<tr>\n         <td></td>            <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>  \n</tr>\n<tr>\n  <th>const</th>           <td>   -1.7962</td> <td>    0.044</td> <td>  -40.888</td> <td> 0.000</td> <td>   -1.882</td> <td>   -1.710</td>\n</tr>\n<tr>\n  <th>cod_pessoas_res</th> <td>    0.0598</td> <td>    0.005</td> <td>   11.126</td> <td> 0.000</td> <td>    0.049</td> <td>    0.070</td>\n</tr>\n<tr>\n  <th>genero_fem</th>      <td>   -0.1497</td> <td>    0.017</td> <td>   -8.682</td> <td> 0.000</td> <td>   -0.184</td> <td>   -0.116</td>\n</tr>\n<tr>\n  <th>cor_preta</th>       <td>    0.4833</td> <td>    0.030</td> <td>   16.062</td> <td> 0.000</td> <td>    0.424</td> <td>    0.542</td>\n</tr>\n<tr>\n  <th>cor_parda</th>       <td>    0.2263</td> <td>    0.019</td> <td>   12.022</td> <td> 0.000</td> <td>    0.189</td> <td>    0.263</td>\n</tr>\n<tr>\n  <th>renda_fx2</th>       <td>    0.5667</td> <td>    0.026</td> <td>   21.641</td> <td> 0.000</td> <td>    0.515</td> <td>    0.618</td>\n</tr>\n<tr>\n  <th>renda_fx3</th>       <td>    0.2331</td> <td>    0.027</td> <td>    8.658</td> <td> 0.000</td> <td>    0.180</td> <td>    0.286</td>\n</tr>\n<tr>\n  <th>renda_fx4</th>       <td>   -0.1763</td> <td>    0.032</td> <td>   -5.571</td> <td> 0.000</td> <td>   -0.238</td> <td>   -0.114</td>\n</tr>\n<tr>\n  <th>renda_fx5</th>       <td>   -0.7315</td> <td>    0.036</td> <td>  -20.461</td> <td> 0.000</td> <td>   -0.802</td> <td>   -0.661</td>\n</tr>\n<tr>\n  <th>em_maioria_pub</th>  <td>   -1.5767</td> <td>    0.060</td> <td>  -26.309</td> <td> 0.000</td> <td>   -1.694</td> <td>   -1.459</td>\n</tr>\n<tr>\n  <th>em_metade_pub</th>   <td>   -1.4715</td> <td>    0.126</td> <td>  -11.645</td> <td> 0.000</td> <td>   -1.719</td> <td>   -1.224</td>\n</tr>\n<tr>\n  <th>em_maioria_priv</th> <td>   -1.9992</td> <td>    0.085</td> <td>  -23.630</td> <td> 0.000</td> <td>   -2.165</td> <td>   -1.833</td>\n</tr>\n<tr>\n  <th>em_total_priv</th>   <td>   -2.1944</td> <td>    0.040</td> <td>  -54.517</td> <td> 0.000</td> <td>   -2.273</td> <td>   -2.116</td>\n</tr>\n<tr>\n  <th>esc_resp_f1</th>     <td>    0.5941</td> <td>    0.043</td> <td>   13.753</td> <td> 0.000</td> <td>    0.509</td> <td>    0.679</td>\n</tr>\n<tr>\n  <th>esc_resp_f2</th>     <td>    0.7448</td> <td>    0.044</td> <td>   17.037</td> <td> 0.000</td> <td>    0.659</td> <td>    0.830</td>\n</tr>\n<tr>\n  <th>esc_resp_em</th>     <td>    0.7142</td> <td>    0.041</td> <td>   17.225</td> <td> 0.000</td> <td>    0.633</td> <td>    0.795</td>\n</tr>\n<tr>\n  <th>esc_resp_sup</th>    <td>    0.4761</td> <td>    0.046</td> <td>   10.341</td> <td> 0.000</td> <td>    0.386</td> <td>    0.566</td>\n</tr>\n</table>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-6-output-4.png){width=950 height=469}\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-6-output-5.png){width=951 height=758}\n:::\n:::\n\n\n### ProUni Parcial vs Pagantes\n\n::: {#7533e4fb .cell execution_count=6}\n``` {.python .cell-code}\ndf_prouni_par = df_privadas[df_privadas['prouni_par'] == 1].copy()\ndf_prouni_par['tratamento'] = 1\n\ndf_controle = df_pagantes.copy()\ndf_controle['tratamento'] = 0\n\ndf_analise2 = pd.concat([df_prouni_par, df_controle])\n\nresultado_prouni_par = run_psm_analysis(\n    df_analise2, 'tratamento', resultado, covariates_base,\n    'ProUni Parcial vs Pagantes'\n)\ndisplay_psm_results(resultado_prouni_par)\n\nif 'erro' not in resultado_prouni_par:\n    plot_ps_distribution(resultado_prouni_par['df_psm'], 'tratamento', 'ProUni Parcial vs Pagantes')\n    plot_love_plot(resultado_prouni_par['df_balance'], 'ProUni Parcial vs Pagantes')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n\n### Resultados: ProUni Parcial vs Pagantes\n\n| Métrica | Valor |\n|---------|-------|\n| N Total | 82,461 |\n| N Tratados | 7,979 |\n| N Controles | 74,482 |\n| Nota Média (Tratados) | 38.9903 |\n| Nota Média (Controles Pareados) | 33.1307 |\n| **ATT (Efeito Causal)** | **5.8596** |\n| P-valor | 0.0000 |\n| Significante (α=0.05) | ✅ |\n| Covariáveis Equilibradas | 16/16 (100%) |\n\n:::\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n#### Modelo Logit para Propensity Score\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<table class=\"simpletable\">\n<caption>Logit Regression Results</caption>\n<tr>\n  <th>Dep. Variable:</th>      <td>tratamento</td>    <th>  No. Observations:  </th>  <td> 82461</td> \n</tr>\n<tr>\n  <th>Model:</th>                 <td>Logit</td>      <th>  Df Residuals:      </th>  <td> 82444</td> \n</tr>\n<tr>\n  <th>Method:</th>                 <td>MLE</td>       <th>  Df Model:          </th>  <td>    16</td> \n</tr>\n<tr>\n  <th>Date:</th>            <td>Tue, 25 Nov 2025</td> <th>  Pseudo R-squ.:     </th>  <td>0.09781</td>\n</tr>\n<tr>\n  <th>Time:</th>                <td>18:02:59</td>     <th>  Log-Likelihood:    </th> <td> -23651.</td>\n</tr>\n<tr>\n  <th>converged:</th>             <td>False</td>      <th>  LL-Null:           </th> <td> -26215.</td>\n</tr>\n<tr>\n  <th>Covariance Type:</th>     <td>nonrobust</td>    <th>  LLR p-value:       </th>  <td> 0.000</td> \n</tr>\n</table>\n<table class=\"simpletable\">\n<tr>\n         <td></td>            <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>  \n</tr>\n<tr>\n  <th>const</th>           <td>   -2.8033</td> <td>    0.065</td> <td>  -43.314</td> <td> 0.000</td> <td>   -2.930</td> <td>   -2.676</td>\n</tr>\n<tr>\n  <th>cod_pessoas_res</th> <td>    0.0440</td> <td>    0.008</td> <td>    5.661</td> <td> 0.000</td> <td>    0.029</td> <td>    0.059</td>\n</tr>\n<tr>\n  <th>genero_fem</th>      <td>    0.1042</td> <td>    0.025</td> <td>    4.097</td> <td> 0.000</td> <td>    0.054</td> <td>    0.154</td>\n</tr>\n<tr>\n  <th>cor_preta</th>       <td>    0.0362</td> <td>    0.048</td> <td>    0.762</td> <td> 0.446</td> <td>   -0.057</td> <td>    0.129</td>\n</tr>\n<tr>\n  <th>cor_parda</th>       <td>   -0.0682</td> <td>    0.028</td> <td>   -2.433</td> <td> 0.015</td> <td>   -0.123</td> <td>   -0.013</td>\n</tr>\n<tr>\n  <th>renda_fx2</th>       <td>    0.6914</td> <td>    0.044</td> <td>   15.789</td> <td> 0.000</td> <td>    0.606</td> <td>    0.777</td>\n</tr>\n<tr>\n  <th>renda_fx3</th>       <td>    0.5953</td> <td>    0.044</td> <td>   13.560</td> <td> 0.000</td> <td>    0.509</td> <td>    0.681</td>\n</tr>\n<tr>\n  <th>renda_fx4</th>       <td>    0.4712</td> <td>    0.048</td> <td>    9.823</td> <td> 0.000</td> <td>    0.377</td> <td>    0.565</td>\n</tr>\n<tr>\n  <th>renda_fx5</th>       <td>    0.2288</td> <td>    0.050</td> <td>    4.596</td> <td> 0.000</td> <td>    0.131</td> <td>    0.326</td>\n</tr>\n<tr>\n  <th>em_maioria_pub</th>  <td>   -1.1400</td> <td>    0.075</td> <td>  -15.127</td> <td> 0.000</td> <td>   -1.288</td> <td>   -0.992</td>\n</tr>\n<tr>\n  <th>em_metade_pub</th>   <td>   -1.1698</td> <td>    0.170</td> <td>   -6.893</td> <td> 0.000</td> <td>   -1.502</td> <td>   -0.837</td>\n</tr>\n<tr>\n  <th>em_maioria_priv</th> <td>   -2.0677</td> <td>    0.135</td> <td>  -15.359</td> <td> 0.000</td> <td>   -2.332</td> <td>   -1.804</td>\n</tr>\n<tr>\n  <th>em_total_priv</th>   <td>   -2.5771</td> <td>    0.073</td> <td>  -35.314</td> <td> 0.000</td> <td>   -2.720</td> <td>   -2.434</td>\n</tr>\n<tr>\n  <th>esc_resp_f1</th>     <td>    0.3246</td> <td>    0.061</td> <td>    5.299</td> <td> 0.000</td> <td>    0.205</td> <td>    0.445</td>\n</tr>\n<tr>\n  <th>esc_resp_f2</th>     <td>    0.4083</td> <td>    0.062</td> <td>    6.569</td> <td> 0.000</td> <td>    0.286</td> <td>    0.530</td>\n</tr>\n<tr>\n  <th>esc_resp_em</th>     <td>    0.4275</td> <td>    0.059</td> <td>    7.281</td> <td> 0.000</td> <td>    0.312</td> <td>    0.543</td>\n</tr>\n<tr>\n  <th>esc_resp_sup</th>    <td>    0.2746</td> <td>    0.066</td> <td>    4.189</td> <td> 0.000</td> <td>    0.146</td> <td>    0.403</td>\n</tr>\n</table>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-7-output-4.png){width=951 height=469}\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-7-output-5.png){width=951 height=758}\n:::\n:::\n\n\n### FIES vs Pagantes\n\n::: {#0a187b72 .cell execution_count=7}\n``` {.python .cell-code}\ndf_fies = df_privadas[df_privadas['fies'] == 1].copy()\ndf_fies['tratamento'] = 1\n\ndf_controle = df_pagantes.copy()\ndf_controle['tratamento'] = 0\n\ndf_analise3 = pd.concat([df_fies, df_controle])\n\nresultado_fies = run_psm_analysis(\n    df_analise3, 'tratamento', resultado, covariates_base,\n    'FIES vs Pagantes'\n)\ndisplay_psm_results(resultado_fies)\n\nif 'erro' not in resultado_fies:\n    plot_ps_distribution(resultado_fies['df_psm'], 'tratamento', 'FIES vs Pagantes')\n    plot_love_plot(resultado_fies['df_balance'], 'FIES vs Pagantes')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n\n### Resultados: FIES vs Pagantes\n\n| Métrica | Valor |\n|---------|-------|\n| N Total | 90,481 |\n| N Tratados | 15,999 |\n| N Controles | 74,482 |\n| Nota Média (Tratados) | 37.1397 |\n| Nota Média (Controles Pareados) | 32.3741 |\n| **ATT (Efeito Causal)** | **4.7656** |\n| P-valor | 0.0000 |\n| Significante (α=0.05) | ✅ |\n| Covariáveis Equilibradas | 16/16 (100%) |\n\n:::\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n#### Modelo Logit para Propensity Score\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<table class=\"simpletable\">\n<caption>Logit Regression Results</caption>\n<tr>\n  <th>Dep. Variable:</th>      <td>tratamento</td>    <th>  No. Observations:  </th>  <td> 90481</td> \n</tr>\n<tr>\n  <th>Model:</th>                 <td>Logit</td>      <th>  Df Residuals:      </th>  <td> 90464</td> \n</tr>\n<tr>\n  <th>Method:</th>                 <td>MLE</td>       <th>  Df Model:          </th>  <td>    16</td> \n</tr>\n<tr>\n  <th>Date:</th>            <td>Tue, 25 Nov 2025</td> <th>  Pseudo R-squ.:     </th>  <td>0.03588</td>\n</tr>\n<tr>\n  <th>Time:</th>                <td>18:03:01</td>     <th>  Log-Likelihood:    </th> <td> -40699.</td>\n</tr>\n<tr>\n  <th>converged:</th>             <td>False</td>      <th>  LL-Null:           </th> <td> -42213.</td>\n</tr>\n<tr>\n  <th>Covariance Type:</th>     <td>nonrobust</td>    <th>  LLR p-value:       </th>  <td> 0.000</td> \n</tr>\n</table>\n<table class=\"simpletable\">\n<tr>\n         <td></td>            <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>  \n</tr>\n<tr>\n  <th>const</th>           <td>   -1.9842</td> <td>    0.040</td> <td>  -49.398</td> <td> 0.000</td> <td>   -2.063</td> <td>   -1.906</td>\n</tr>\n<tr>\n  <th>cod_pessoas_res</th> <td>   -0.0035</td> <td>    0.006</td> <td>   -0.604</td> <td> 0.546</td> <td>   -0.015</td> <td>    0.008</td>\n</tr>\n<tr>\n  <th>genero_fem</th>      <td>    0.1510</td> <td>    0.019</td> <td>    8.154</td> <td> 0.000</td> <td>    0.115</td> <td>    0.187</td>\n</tr>\n<tr>\n  <th>cor_preta</th>       <td>    0.4047</td> <td>    0.034</td> <td>   12.042</td> <td> 0.000</td> <td>    0.339</td> <td>    0.471</td>\n</tr>\n<tr>\n  <th>cor_parda</th>       <td>    0.2727</td> <td>    0.020</td> <td>   13.569</td> <td> 0.000</td> <td>    0.233</td> <td>    0.312</td>\n</tr>\n<tr>\n  <th>renda_fx2</th>       <td>    0.4709</td> <td>    0.027</td> <td>   17.151</td> <td> 0.000</td> <td>    0.417</td> <td>    0.525</td>\n</tr>\n<tr>\n  <th>renda_fx3</th>       <td>    0.2071</td> <td>    0.028</td> <td>    7.407</td> <td> 0.000</td> <td>    0.152</td> <td>    0.262</td>\n</tr>\n<tr>\n  <th>renda_fx4</th>       <td>   -0.0265</td> <td>    0.032</td> <td>   -0.828</td> <td> 0.407</td> <td>   -0.089</td> <td>    0.036</td>\n</tr>\n<tr>\n  <th>renda_fx5</th>       <td>   -0.2757</td> <td>    0.033</td> <td>   -8.423</td> <td> 0.000</td> <td>   -0.340</td> <td>   -0.212</td>\n</tr>\n<tr>\n  <th>em_maioria_pub</th>  <td>   -0.0382</td> <td>    0.039</td> <td>   -0.984</td> <td> 0.325</td> <td>   -0.114</td> <td>    0.038</td>\n</tr>\n<tr>\n  <th>em_metade_pub</th>   <td>   -0.4251</td> <td>    0.099</td> <td>   -4.277</td> <td> 0.000</td> <td>   -0.620</td> <td>   -0.230</td>\n</tr>\n<tr>\n  <th>em_maioria_priv</th> <td>   -0.1944</td> <td>    0.047</td> <td>   -4.110</td> <td> 0.000</td> <td>   -0.287</td> <td>   -0.102</td>\n</tr>\n<tr>\n  <th>em_total_priv</th>   <td>   -0.5870</td> <td>    0.026</td> <td>  -22.247</td> <td> 0.000</td> <td>   -0.639</td> <td>   -0.535</td>\n</tr>\n<tr>\n  <th>esc_resp_f1</th>     <td>    0.3076</td> <td>    0.039</td> <td>    7.832</td> <td> 0.000</td> <td>    0.231</td> <td>    0.385</td>\n</tr>\n<tr>\n  <th>esc_resp_f2</th>     <td>    0.3333</td> <td>    0.040</td> <td>    8.288</td> <td> 0.000</td> <td>    0.254</td> <td>    0.412</td>\n</tr>\n<tr>\n  <th>esc_resp_em</th>     <td>    0.3459</td> <td>    0.036</td> <td>    9.535</td> <td> 0.000</td> <td>    0.275</td> <td>    0.417</td>\n</tr>\n<tr>\n  <th>esc_resp_sup</th>    <td>    0.1683</td> <td>    0.040</td> <td>    4.255</td> <td> 0.000</td> <td>    0.091</td> <td>    0.246</td>\n</tr>\n</table>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-8-output-4.png){width=951 height=469}\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-8-output-5.png){width=951 height=758}\n:::\n:::\n\n\n### ProUni Parcial + FIES vs Pagantes\n\n::: {#697a001b .cell execution_count=8}\n``` {.python .cell-code}\ndf_prouni_fies = df_privadas[df_privadas['prouni_fies'] == 1].copy()\ndf_prouni_fies['tratamento'] = 1\n\ndf_controle = df_pagantes.copy()\ndf_controle['tratamento'] = 0\n\ndf_analise4 = pd.concat([df_prouni_fies, df_controle])\n\nresultado_prouni_fies = run_psm_analysis(\n    df_analise4, 'tratamento', resultado, covariates_base,\n    'ProUni Parcial + FIES vs Pagantes'\n)\ndisplay_psm_results(resultado_prouni_fies)\n\nif 'erro' not in resultado_prouni_fies:\n    plot_ps_distribution(resultado_prouni_fies['df_psm'], 'tratamento', 'ProUni+FIES vs Pagantes')\n    plot_love_plot(resultado_prouni_fies['df_balance'], 'ProUni+FIES vs Pagantes')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n\n### Resultados: ProUni Parcial + FIES vs Pagantes\n\n| Métrica | Valor |\n|---------|-------|\n| N Total | 76,458 |\n| N Tratados | 1,976 |\n| N Controles | 74,482 |\n| Nota Média (Tratados) | 39.3709 |\n| Nota Média (Controles Pareados) | 32.8645 |\n| **ATT (Efeito Causal)** | **6.5064** |\n| P-valor | 0.0000 |\n| Significante (α=0.05) | ✅ |\n| Covariáveis Equilibradas | 16/16 (100%) |\n\n:::\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n#### Modelo Logit para Propensity Score\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<table class=\"simpletable\">\n<caption>Logit Regression Results</caption>\n<tr>\n  <th>Dep. Variable:</th>      <td>tratamento</td>    <th>  No. Observations:  </th>   <td> 76458</td>  \n</tr>\n<tr>\n  <th>Model:</th>                 <td>Logit</td>      <th>  Df Residuals:      </th>   <td> 76441</td>  \n</tr>\n<tr>\n  <th>Method:</th>                 <td>MLE</td>       <th>  Df Model:          </th>   <td>    16</td>  \n</tr>\n<tr>\n  <th>Date:</th>            <td>Tue, 25 Nov 2025</td> <th>  Pseudo R-squ.:     </th>   <td>0.06531</td> \n</tr>\n<tr>\n  <th>Time:</th>                <td>18:03:03</td>     <th>  Log-Likelihood:    </th>  <td> -8574.7</td> \n</tr>\n<tr>\n  <th>converged:</th>             <td>False</td>      <th>  LL-Null:           </th>  <td> -9173.8</td> \n</tr>\n<tr>\n  <th>Covariance Type:</th>     <td>nonrobust</td>    <th>  LLR p-value:       </th> <td>3.332e-245</td>\n</tr>\n</table>\n<table class=\"simpletable\">\n<tr>\n         <td></td>            <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>  \n</tr>\n<tr>\n  <th>const</th>           <td>   -3.8613</td> <td>    0.116</td> <td>  -33.242</td> <td> 0.000</td> <td>   -4.089</td> <td>   -3.634</td>\n</tr>\n<tr>\n  <th>cod_pessoas_res</th> <td>   -0.0281</td> <td>    0.015</td> <td>   -1.890</td> <td> 0.059</td> <td>   -0.057</td> <td>    0.001</td>\n</tr>\n<tr>\n  <th>genero_fem</th>      <td>   -0.0559</td> <td>    0.048</td> <td>   -1.173</td> <td> 0.241</td> <td>   -0.149</td> <td>    0.037</td>\n</tr>\n<tr>\n  <th>cor_preta</th>       <td>    0.3827</td> <td>    0.081</td> <td>    4.715</td> <td> 0.000</td> <td>    0.224</td> <td>    0.542</td>\n</tr>\n<tr>\n  <th>cor_parda</th>       <td>    0.1739</td> <td>    0.052</td> <td>    3.369</td> <td> 0.001</td> <td>    0.073</td> <td>    0.275</td>\n</tr>\n<tr>\n  <th>renda_fx2</th>       <td>    0.6584</td> <td>    0.076</td> <td>    8.712</td> <td> 0.000</td> <td>    0.510</td> <td>    0.807</td>\n</tr>\n<tr>\n  <th>renda_fx3</th>       <td>    0.3448</td> <td>    0.078</td> <td>    4.404</td> <td> 0.000</td> <td>    0.191</td> <td>    0.498</td>\n</tr>\n<tr>\n  <th>renda_fx4</th>       <td>    0.0879</td> <td>    0.090</td> <td>    0.979</td> <td> 0.328</td> <td>   -0.088</td> <td>    0.264</td>\n</tr>\n<tr>\n  <th>renda_fx5</th>       <td>   -0.3714</td> <td>    0.100</td> <td>   -3.706</td> <td> 0.000</td> <td>   -0.568</td> <td>   -0.175</td>\n</tr>\n<tr>\n  <th>em_maioria_pub</th>  <td>   -0.8798</td> <td>    0.136</td> <td>   -6.491</td> <td> 0.000</td> <td>   -1.145</td> <td>   -0.614</td>\n</tr>\n<tr>\n  <th>em_metade_pub</th>   <td>   -0.8989</td> <td>    0.302</td> <td>   -2.978</td> <td> 0.003</td> <td>   -1.490</td> <td>   -0.307</td>\n</tr>\n<tr>\n  <th>em_maioria_priv</th> <td>   -0.8404</td> <td>    0.155</td> <td>   -5.416</td> <td> 0.000</td> <td>   -1.145</td> <td>   -0.536</td>\n</tr>\n<tr>\n  <th>em_total_priv</th>   <td>   -1.9179</td> <td>    0.114</td> <td>  -16.818</td> <td> 0.000</td> <td>   -2.141</td> <td>   -1.694</td>\n</tr>\n<tr>\n  <th>esc_resp_f1</th>     <td>    0.4809</td> <td>    0.113</td> <td>    4.261</td> <td> 0.000</td> <td>    0.260</td> <td>    0.702</td>\n</tr>\n<tr>\n  <th>esc_resp_f2</th>     <td>    0.4249</td> <td>    0.116</td> <td>    3.666</td> <td> 0.000</td> <td>    0.198</td> <td>    0.652</td>\n</tr>\n<tr>\n  <th>esc_resp_em</th>     <td>    0.3591</td> <td>    0.109</td> <td>    3.279</td> <td> 0.001</td> <td>    0.144</td> <td>    0.574</td>\n</tr>\n<tr>\n  <th>esc_resp_sup</th>    <td>    0.2411</td> <td>    0.122</td> <td>    1.976</td> <td> 0.048</td> <td>    0.002</td> <td>    0.480</td>\n</tr>\n</table>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-9-output-4.png){width=951 height=469}\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-9-output-5.png){width=951 height=758}\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## Bloco 2: Políticas de Permanência (IES Públicas)\n\n::: callout-note\n## Escopo Amostral\n\nOs auxílios de permanência (PNAES) são concentrados nas IES públicas. Portanto, analisamos o efeito desses auxílios comparando beneficiários com não-beneficiários dentro das instituições públicas.\n:::\n\n### Auxílio Permanência (IES Públicas)\n\n::: {#2e05f626 .cell execution_count=9}\n``` {.python .cell-code}\nresultado_aux_perm = run_psm_analysis(\n    df_publicas, 'aux_perm', resultado, covariates_base, \n    'Auxílio Permanência (IES Públicas)'\n)\ndisplay_psm_results(resultado_aux_perm)\n\nif 'erro' not in resultado_aux_perm:\n    plot_ps_distribution(resultado_aux_perm['df_psm'], 'aux_perm', 'Auxílio Permanência')\n    plot_love_plot(resultado_aux_perm['df_balance'], 'Auxílio Permanência')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n\n### Resultados: Auxílio Permanência (IES Públicas)\n\n| Métrica | Valor |\n|---------|-------|\n| N Total | 80,651 |\n| N Tratados | 1,568 |\n| N Controles | 79,083 |\n| Nota Média (Tratados) | 43.6029 |\n| Nota Média (Controles Pareados) | 35.2950 |\n| **ATT (Efeito Causal)** | **8.3079** |\n| P-valor | 0.0000 |\n| Significante (α=0.05) | ✅ |\n| Covariáveis Equilibradas | 16/16 (100%) |\n\n:::\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n#### Modelo Logit para Propensity Score\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<table class=\"simpletable\">\n<caption>Logit Regression Results</caption>\n<tr>\n  <th>Dep. Variable:</th>       <td>aux_perm</td>     <th>  No. Observations:  </th>  <td> 80651</td> \n</tr>\n<tr>\n  <th>Model:</th>                 <td>Logit</td>      <th>  Df Residuals:      </th>  <td> 80634</td> \n</tr>\n<tr>\n  <th>Method:</th>                 <td>MLE</td>       <th>  Df Model:          </th>  <td>    16</td> \n</tr>\n<tr>\n  <th>Date:</th>            <td>Tue, 25 Nov 2025</td> <th>  Pseudo R-squ.:     </th>  <td>0.1014</td> \n</tr>\n<tr>\n  <th>Time:</th>                <td>18:03:04</td>     <th>  Log-Likelihood:    </th> <td> -6947.4</td>\n</tr>\n<tr>\n  <th>converged:</th>             <td>False</td>      <th>  LL-Null:           </th> <td> -7731.1</td>\n</tr>\n<tr>\n  <th>Covariance Type:</th>     <td>nonrobust</td>    <th>  LLR p-value:       </th>  <td> 0.000</td> \n</tr>\n</table>\n<table class=\"simpletable\">\n<tr>\n         <td></td>            <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>  \n</tr>\n<tr>\n  <th>const</th>           <td>   -4.2107</td> <td>    0.117</td> <td>  -35.898</td> <td> 0.000</td> <td>   -4.441</td> <td>   -3.981</td>\n</tr>\n<tr>\n  <th>cod_pessoas_res</th> <td>   -0.0109</td> <td>    0.015</td> <td>   -0.704</td> <td> 0.482</td> <td>   -0.041</td> <td>    0.019</td>\n</tr>\n<tr>\n  <th>genero_fem</th>      <td>    0.3195</td> <td>    0.053</td> <td>    6.006</td> <td> 0.000</td> <td>    0.215</td> <td>    0.424</td>\n</tr>\n<tr>\n  <th>cor_preta</th>       <td>    1.0827</td> <td>    0.077</td> <td>   14.016</td> <td> 0.000</td> <td>    0.931</td> <td>    1.234</td>\n</tr>\n<tr>\n  <th>cor_parda</th>       <td>    0.7505</td> <td>    0.057</td> <td>   13.121</td> <td> 0.000</td> <td>    0.638</td> <td>    0.863</td>\n</tr>\n<tr>\n  <th>renda_fx2</th>       <td>   -0.1770</td> <td>    0.063</td> <td>   -2.806</td> <td> 0.005</td> <td>   -0.301</td> <td>   -0.053</td>\n</tr>\n<tr>\n  <th>renda_fx3</th>       <td>   -0.7028</td> <td>    0.076</td> <td>   -9.202</td> <td> 0.000</td> <td>   -0.852</td> <td>   -0.553</td>\n</tr>\n<tr>\n  <th>renda_fx4</th>       <td>   -1.0485</td> <td>    0.104</td> <td>  -10.048</td> <td> 0.000</td> <td>   -1.253</td> <td>   -0.844</td>\n</tr>\n<tr>\n  <th>renda_fx5</th>       <td>   -1.7058</td> <td>    0.137</td> <td>  -12.444</td> <td> 0.000</td> <td>   -1.974</td> <td>   -1.437</td>\n</tr>\n<tr>\n  <th>em_maioria_pub</th>  <td>   -1.0033</td> <td>    0.188</td> <td>   -5.337</td> <td> 0.000</td> <td>   -1.372</td> <td>   -0.635</td>\n</tr>\n<tr>\n  <th>em_metade_pub</th>   <td>   -0.9129</td> <td>    0.414</td> <td>   -2.207</td> <td> 0.027</td> <td>   -1.724</td> <td>   -0.102</td>\n</tr>\n<tr>\n  <th>em_maioria_priv</th> <td>   -0.8675</td> <td>    0.178</td> <td>   -4.887</td> <td> 0.000</td> <td>   -1.215</td> <td>   -0.520</td>\n</tr>\n<tr>\n  <th>em_total_priv</th>   <td>   -1.4887</td> <td>    0.090</td> <td>  -16.475</td> <td> 0.000</td> <td>   -1.666</td> <td>   -1.312</td>\n</tr>\n<tr>\n  <th>esc_resp_f1</th>     <td>    0.5539</td> <td>    0.119</td> <td>    4.672</td> <td> 0.000</td> <td>    0.322</td> <td>    0.786</td>\n</tr>\n<tr>\n  <th>esc_resp_f2</th>     <td>    0.8220</td> <td>    0.119</td> <td>    6.880</td> <td> 0.000</td> <td>    0.588</td> <td>    1.056</td>\n</tr>\n<tr>\n  <th>esc_resp_em</th>     <td>    0.7641</td> <td>    0.110</td> <td>    6.969</td> <td> 0.000</td> <td>    0.549</td> <td>    0.979</td>\n</tr>\n<tr>\n  <th>esc_resp_sup</th>    <td>    0.3600</td> <td>    0.125</td> <td>    2.884</td> <td> 0.004</td> <td>    0.115</td> <td>    0.605</td>\n</tr>\n</table>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-10-output-4.png){width=951 height=469}\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-10-output-5.png){width=951 height=758}\n:::\n:::\n\n\n### Auxílio Alimentação (IES Públicas)\n\n::: {#949e2793 .cell execution_count=10}\n``` {.python .cell-code}\nresultado_aux_alim = run_psm_analysis(\n    df_publicas, 'aux_alim', resultado, covariates_base,\n    'Auxílio Alimentação (IES Públicas)'\n)\ndisplay_psm_results(resultado_aux_alim)\n\nif 'erro' not in resultado_aux_alim:\n    plot_ps_distribution(resultado_aux_alim['df_psm'], 'aux_alim', 'Auxílio Alimentação')\n    plot_love_plot(resultado_aux_alim['df_balance'], 'Auxílio Alimentação')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n\n### Resultados: Auxílio Alimentação (IES Públicas)\n\n| Métrica | Valor |\n|---------|-------|\n| N Total | 80,651 |\n| N Tratados | 1,234 |\n| N Controles | 79,417 |\n| Nota Média (Tratados) | 43.5833 |\n| Nota Média (Controles Pareados) | 37.7335 |\n| **ATT (Efeito Causal)** | **5.8498** |\n| P-valor | 0.0000 |\n| Significante (α=0.05) | ✅ |\n| Covariáveis Equilibradas | 16/16 (100%) |\n\n:::\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n#### Modelo Logit para Propensity Score\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<table class=\"simpletable\">\n<caption>Logit Regression Results</caption>\n<tr>\n  <th>Dep. Variable:</th>       <td>aux_alim</td>     <th>  No. Observations:  </th>   <td> 80651</td>  \n</tr>\n<tr>\n  <th>Model:</th>                 <td>Logit</td>      <th>  Df Residuals:      </th>   <td> 80634</td>  \n</tr>\n<tr>\n  <th>Method:</th>                 <td>MLE</td>       <th>  Df Model:          </th>   <td>    16</td>  \n</tr>\n<tr>\n  <th>Date:</th>            <td>Tue, 25 Nov 2025</td> <th>  Pseudo R-squ.:     </th>   <td>0.06132</td> \n</tr>\n<tr>\n  <th>Time:</th>                <td>18:03:06</td>     <th>  Log-Likelihood:    </th>  <td> -5991.1</td> \n</tr>\n<tr>\n  <th>converged:</th>             <td>False</td>      <th>  LL-Null:           </th>  <td> -6382.5</td> \n</tr>\n<tr>\n  <th>Covariance Type:</th>     <td>nonrobust</td>    <th>  LLR p-value:       </th> <td>2.963e-156</td>\n</tr>\n</table>\n<table class=\"simpletable\">\n<tr>\n         <td></td>            <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>  \n</tr>\n<tr>\n  <th>const</th>           <td>   -4.5033</td> <td>    0.134</td> <td>  -33.710</td> <td> 0.000</td> <td>   -4.765</td> <td>   -4.241</td>\n</tr>\n<tr>\n  <th>cod_pessoas_res</th> <td>   -0.0397</td> <td>    0.018</td> <td>   -2.234</td> <td> 0.026</td> <td>   -0.075</td> <td>   -0.005</td>\n</tr>\n<tr>\n  <th>genero_fem</th>      <td>    0.1720</td> <td>    0.059</td> <td>    2.927</td> <td> 0.003</td> <td>    0.057</td> <td>    0.287</td>\n</tr>\n<tr>\n  <th>cor_preta</th>       <td>    0.4693</td> <td>    0.096</td> <td>    4.897</td> <td> 0.000</td> <td>    0.281</td> <td>    0.657</td>\n</tr>\n<tr>\n  <th>cor_parda</th>       <td>    0.3785</td> <td>    0.062</td> <td>    6.074</td> <td> 0.000</td> <td>    0.256</td> <td>    0.501</td>\n</tr>\n<tr>\n  <th>renda_fx2</th>       <td>    0.2248</td> <td>    0.075</td> <td>    3.002</td> <td> 0.003</td> <td>    0.078</td> <td>    0.372</td>\n</tr>\n<tr>\n  <th>renda_fx3</th>       <td>   -0.2012</td> <td>    0.085</td> <td>   -2.363</td> <td> 0.018</td> <td>   -0.368</td> <td>   -0.034</td>\n</tr>\n<tr>\n  <th>renda_fx4</th>       <td>   -0.6532</td> <td>    0.115</td> <td>   -5.684</td> <td> 0.000</td> <td>   -0.879</td> <td>   -0.428</td>\n</tr>\n<tr>\n  <th>renda_fx5</th>       <td>   -1.2995</td> <td>    0.145</td> <td>   -8.989</td> <td> 0.000</td> <td>   -1.583</td> <td>   -1.016</td>\n</tr>\n<tr>\n  <th>em_maioria_pub</th>  <td>   -0.6393</td> <td>    0.183</td> <td>   -3.502</td> <td> 0.000</td> <td>   -0.997</td> <td>   -0.282</td>\n</tr>\n<tr>\n  <th>em_metade_pub</th>   <td>   -0.7951</td> <td>    0.450</td> <td>   -1.769</td> <td> 0.077</td> <td>   -1.676</td> <td>    0.086</td>\n</tr>\n<tr>\n  <th>em_maioria_priv</th> <td>   -0.6455</td> <td>    0.188</td> <td>   -3.441</td> <td> 0.001</td> <td>   -1.013</td> <td>   -0.278</td>\n</tr>\n<tr>\n  <th>em_total_priv</th>   <td>   -1.0193</td> <td>    0.089</td> <td>  -11.444</td> <td> 0.000</td> <td>   -1.194</td> <td>   -0.845</td>\n</tr>\n<tr>\n  <th>esc_resp_f1</th>     <td>    0.8398</td> <td>    0.133</td> <td>    6.298</td> <td> 0.000</td> <td>    0.578</td> <td>    1.101</td>\n</tr>\n<tr>\n  <th>esc_resp_f2</th>     <td>    0.7903</td> <td>    0.138</td> <td>    5.712</td> <td> 0.000</td> <td>    0.519</td> <td>    1.061</td>\n</tr>\n<tr>\n  <th>esc_resp_em</th>     <td>    0.7796</td> <td>    0.125</td> <td>    6.220</td> <td> 0.000</td> <td>    0.534</td> <td>    1.025</td>\n</tr>\n<tr>\n  <th>esc_resp_sup</th>    <td>    0.4434</td> <td>    0.139</td> <td>    3.197</td> <td> 0.001</td> <td>    0.172</td> <td>    0.715</td>\n</tr>\n</table>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-11-output-4.png){width=951 height=469}\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-11-output-5.png){width=951 height=758}\n:::\n:::\n\n\n---\n\n## Bloco 3: Efeito da Gratuidade com Auxílios de Permanência\n\n::: {.callout-important}\n## Justificativa Metodológica\n\nNeste bloco, investigamos o **efeito incremental** das políticas de permanência (auxílios do PNAES) sobre o desempenho acadêmico de estudantes que já possuem **gratuidade total** no curso.\n\n### Por que usar `curso_gratuito` em vez de `prouni_int`?\n\nA variável **`curso_gratuito`** abrange tanto cursos em **IES públicas** quanto beneficiários de **ProUni Integral** em IES privadas, representando o universo de estudantes com gratuidade plena. Esta escolha metodológica apresenta vantagens:\n\n1. **Maior comparabilidade institucional**: Estudantes de IES públicas e privadas com ProUni Integral compartilham a característica fundamental de **isenção total de mensalidade**, mas diferem no acesso a auxílios de permanência.\n\n2. **Controle pelo viés de seleção institucional**: Ao incluir ambos os grupos no universo de \"gratuidade\", evitamos confundir o efeito da permanência com preferências por tipo de instituição.\n\n3. **Foco na política de permanência**: A comparação isola o efeito dos **auxílios** (tratamento) mantendo constante a **gratuidade** (característica compartilhada).\n\n### Estratégia de Identificação\n\nComparamos estudantes com **curso gratuito** que:\n\n- **Grupo Tratamento**: Recebem auxílio de permanência/alimentação (principalmente IES públicas)\n- **Grupo Controle**: Não recebem auxílio (IES públicas sem auxílio + ProUni Integral sem auxílio)\n\nEsta estratégia responde: *\"Dentre quem já tem gratuidade, receber auxílio de permanência melhora o desempenho?\"*\n:::\n\n::: {.callout-warning}\n## Covariáveis Específicas para Comparação Inter-Institucional\n\nPara comparar estudantes entre instituições públicas e privadas, utilizamos um conjunto reduzido de covariáveis que:\n\n1. **Não incluem** características institucionais (evita colinearidade perfeita com o tratamento)\n2. **Focam** em características socioeconômicas e demográficas comparáveis entre setores\n3. **Evitam** variáveis que podem ter significados diferentes entre setores (ex: bolsas internas)\n:::\n\n::: {#2a118e78 .cell execution_count=11}\n``` {.python .cell-code}\n# Covariáveis específicas para comparação entre instituições\n# Excluímos variáveis institucionais e focamos em características do estudante\ncovariates_bloco3 = [\n    'cod_pessoas_res',\n    'genero_fem',\n    'cor_preta', 'cor_parda',\n    'renda_fx2', 'renda_fx3', 'renda_fx4', 'renda_fx5',\n    'em_total_pub',  # Ensino médio público (mais simples)\n    'esc_resp_em', 'esc_resp_sup'  # Escolaridade dos pais (reduzido)\n]\n\ndisplay(Markdown(f\"**Covariáveis para Bloco 3:** {len(covariates_bloco3)} variáveis\"))\ndisplay(Markdown(f\"Variáveis: {', '.join(covariates_bloco3)}\"))\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n**Covariáveis para Bloco 3:** 11 variáveis\n:::\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\nVariáveis: cod_pessoas_res, genero_fem, cor_preta, cor_parda, renda_fx2, renda_fx3, renda_fx4, renda_fx5, em_total_pub, esc_resp_em, esc_resp_sup\n:::\n:::\n\n\n### Auxílio Permanência entre Estudantes com Curso Gratuito\n\n::: {#75686290 .cell execution_count=12}\n``` {.python .cell-code}\n# Filtrar apenas estudantes com curso gratuito\ndf_gratuito = df_full[df_full['curso_gratuito'] == 1].copy()\n\ndisplay(Markdown(f\"\"\"\n### Composição da Amostra (Curso Gratuito)\n\n| Categoria | N | % |\n|-----------|---:|---:|\n| IES Pública | {len(df_gratuito[df_gratuito['cod_ies_cat'] == 1]):,} | {len(df_gratuito[df_gratuito['cod_ies_cat'] == 1])/len(df_gratuito)*100:.1f}% |\n| ProUni Integral (Privada) | {len(df_gratuito[df_gratuito['prouni_int'] == 1]):,} | {len(df_gratuito[df_gratuito['prouni_int'] == 1])/len(df_gratuito)*100:.1f}% |\n| **Total com Gratuidade** | **{len(df_gratuito):,}** | **100%** |\n| Com Auxílio Permanência | {len(df_gratuito[df_gratuito['aux_perm'] == 1]):,} | {len(df_gratuito[df_gratuito['aux_perm'] == 1])/len(df_gratuito)*100:.1f}% |\n| Sem Auxílio Permanência | {len(df_gratuito[df_gratuito['aux_perm'] == 0]):,} | {len(df_gratuito[df_gratuito['aux_perm'] == 0])/len(df_gratuito)*100:.1f}% |\n\"\"\"))\n\n# PSM: Auxílio Permanência entre estudantes com curso gratuito\nresultado_aux_perm_gratuito = run_psm_analysis(\n    df_gratuito, 'aux_perm', resultado, covariates_bloco3,\n    'Auxílio Permanência (entre estudantes com curso gratuito)'\n)\ndisplay_psm_results(resultado_aux_perm_gratuito)\n\nif 'erro' not in resultado_aux_perm_gratuito:\n    plot_ps_distribution(resultado_aux_perm_gratuito['df_psm'], 'aux_perm', 'Auxílio Permanência (Curso Gratuito)')\n    plot_love_plot(resultado_aux_perm_gratuito['df_balance'], 'Auxílio Permanência (Curso Gratuito)')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n\n### Composição da Amostra (Curso Gratuito)\n\n| Categoria | N | % |\n|-----------|---:|---:|\n| IES Pública | 34,120 | 62.2% |\n| ProUni Integral (Privada) | 20,891 | 38.1% |\n| **Total com Gratuidade** | **54,880** | **100%** |\n| Com Auxílio Permanência | 1,355 | 2.5% |\n| Sem Auxílio Permanência | 53,525 | 97.5% |\n\n:::\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n\n### Resultados: Auxílio Permanência (entre estudantes com curso gratuito)\n\n| Métrica | Valor |\n|---------|-------|\n| N Total | 54,837 |\n| N Tratados | 1,355 |\n| N Controles | 53,482 |\n| Nota Média (Tratados) | 44.2605 |\n| Nota Média (Controles Pareados) | 43.0751 |\n| **ATT (Efeito Causal)** | **1.1854** |\n| P-valor | 0.0212 |\n| Significante (α=0.05) | ✅ |\n| Covariáveis Equilibradas | 11/11 (100%) |\n\n:::\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n#### Modelo Logit para Propensity Score\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<table class=\"simpletable\">\n<caption>Logit Regression Results</caption>\n<tr>\n  <th>Dep. Variable:</th>       <td>aux_perm</td>     <th>  No. Observations:  </th>   <td> 54837</td>  \n</tr>\n<tr>\n  <th>Model:</th>                 <td>Logit</td>      <th>  Df Residuals:      </th>   <td> 54825</td>  \n</tr>\n<tr>\n  <th>Method:</th>                 <td>MLE</td>       <th>  Df Model:          </th>   <td>    11</td>  \n</tr>\n<tr>\n  <th>Date:</th>            <td>Tue, 25 Nov 2025</td> <th>  Pseudo R-squ.:     </th>   <td>0.05273</td> \n</tr>\n<tr>\n  <th>Time:</th>                <td>18:03:07</td>     <th>  Log-Likelihood:    </th>  <td> -6017.4</td> \n</tr>\n<tr>\n  <th>converged:</th>             <td>True</td>       <th>  LL-Null:           </th>  <td> -6352.4</td> \n</tr>\n<tr>\n  <th>Covariance Type:</th>     <td>nonrobust</td>    <th>  LLR p-value:       </th> <td>1.531e-136</td>\n</tr>\n</table>\n<table class=\"simpletable\">\n<tr>\n         <td></td>            <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>  \n</tr>\n<tr>\n  <th>const</th>           <td>   -4.4524</td> <td>    0.103</td> <td>  -43.377</td> <td> 0.000</td> <td>   -4.654</td> <td>   -4.251</td>\n</tr>\n<tr>\n  <th>cod_pessoas_res</th> <td>    0.0200</td> <td>    0.017</td> <td>    1.173</td> <td> 0.241</td> <td>   -0.013</td> <td>    0.053</td>\n</tr>\n<tr>\n  <th>genero_fem</th>      <td>    0.3118</td> <td>    0.058</td> <td>    5.409</td> <td> 0.000</td> <td>    0.199</td> <td>    0.425</td>\n</tr>\n<tr>\n  <th>cor_preta</th>       <td>    0.8464</td> <td>    0.084</td> <td>   10.074</td> <td> 0.000</td> <td>    0.682</td> <td>    1.011</td>\n</tr>\n<tr>\n  <th>cor_parda</th>       <td>    0.7038</td> <td>    0.061</td> <td>   11.482</td> <td> 0.000</td> <td>    0.584</td> <td>    0.824</td>\n</tr>\n<tr>\n  <th>renda_fx2</th>       <td>   -0.3253</td> <td>    0.068</td> <td>   -4.788</td> <td> 0.000</td> <td>   -0.458</td> <td>   -0.192</td>\n</tr>\n<tr>\n  <th>renda_fx3</th>       <td>   -0.8375</td> <td>    0.083</td> <td>  -10.140</td> <td> 0.000</td> <td>   -0.999</td> <td>   -0.676</td>\n</tr>\n<tr>\n  <th>renda_fx4</th>       <td>   -0.9411</td> <td>    0.110</td> <td>   -8.570</td> <td> 0.000</td> <td>   -1.156</td> <td>   -0.726</td>\n</tr>\n<tr>\n  <th>renda_fx5</th>       <td>   -1.5598</td> <td>    0.154</td> <td>  -10.155</td> <td> 0.000</td> <td>   -1.861</td> <td>   -1.259</td>\n</tr>\n<tr>\n  <th>em_total_pub</th>    <td>    0.7676</td> <td>    0.083</td> <td>    9.232</td> <td> 0.000</td> <td>    0.605</td> <td>    0.931</td>\n</tr>\n<tr>\n  <th>esc_resp_em</th>     <td>    0.1801</td> <td>    0.059</td> <td>    3.045</td> <td> 0.002</td> <td>    0.064</td> <td>    0.296</td>\n</tr>\n<tr>\n  <th>esc_resp_sup</th>    <td>   -0.1409</td> <td>    0.094</td> <td>   -1.493</td> <td> 0.135</td> <td>   -0.326</td> <td>    0.044</td>\n</tr>\n</table>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-13-output-5.png){width=949 height=469}\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-13-output-6.png){width=951 height=758}\n:::\n:::\n\n\n### Auxílio Alimentação entre Estudantes com Curso Gratuito\n\n::: {#91bbacb9 .cell execution_count=13}\n``` {.python .cell-code}\ndisplay(Markdown(f\"\"\"\n### Distribuição: Auxílio Alimentação\n\n| Grupo | N | % |\n|-------|---:|---:|\n| Com Auxílio Alimentação | {len(df_gratuito[df_gratuito['aux_alim'] == 1]):,} | {len(df_gratuito[df_gratuito['aux_alim'] == 1])/len(df_gratuito)*100:.1f}% |\n| Sem Auxílio Alimentação | {len(df_gratuito[df_gratuito['aux_alim'] == 0]):,} | {len(df_gratuito[df_gratuito['aux_alim'] == 0])/len(df_gratuito)*100:.1f}% |\n\"\"\"))\n\n# PSM: Auxílio Alimentação entre estudantes com curso gratuito\nresultado_aux_alim_gratuito = run_psm_analysis(\n    df_gratuito, 'aux_alim', resultado, covariates_bloco3,\n    'Auxílio Alimentação (entre estudantes com curso gratuito)'\n)\ndisplay_psm_results(resultado_aux_alim_gratuito)\n\nif 'erro' not in resultado_aux_alim_gratuito:\n    plot_ps_distribution(resultado_aux_alim_gratuito['df_psm'], 'aux_alim', 'Auxílio Alimentação (Curso Gratuito)')\n    plot_love_plot(resultado_aux_alim_gratuito['df_balance'], 'Auxílio Alimentação (Curso Gratuito)')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n\n### Distribuição: Auxílio Alimentação\n\n| Grupo | N | % |\n|-------|---:|---:|\n| Com Auxílio Alimentação | 1,258 | 2.3% |\n| Sem Auxílio Alimentação | 53,622 | 97.7% |\n\n:::\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n\n### Resultados: Auxílio Alimentação (entre estudantes com curso gratuito)\n\n| Métrica | Valor |\n|---------|-------|\n| N Total | 54,837 |\n| N Tratados | 1,258 |\n| N Controles | 53,579 |\n| Nota Média (Tratados) | 44.1556 |\n| Nota Média (Controles Pareados) | 43.0416 |\n| **ATT (Efeito Causal)** | **1.1140** |\n| P-valor | 0.0430 |\n| Significante (α=0.05) | ✅ |\n| Covariáveis Equilibradas | 11/11 (100%) |\n\n:::\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n#### Modelo Logit para Propensity Score\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<table class=\"simpletable\">\n<caption>Logit Regression Results</caption>\n<tr>\n  <th>Dep. Variable:</th>       <td>aux_alim</td>     <th>  No. Observations:  </th>  <td> 54837</td>  \n</tr>\n<tr>\n  <th>Model:</th>                 <td>Logit</td>      <th>  Df Residuals:      </th>  <td> 54825</td>  \n</tr>\n<tr>\n  <th>Method:</th>                 <td>MLE</td>       <th>  Df Model:          </th>  <td>    11</td>  \n</tr>\n<tr>\n  <th>Date:</th>            <td>Tue, 25 Nov 2025</td> <th>  Pseudo R-squ.:     </th>  <td>0.01960</td> \n</tr>\n<tr>\n  <th>Time:</th>                <td>18:03:08</td>     <th>  Log-Likelihood:    </th> <td> -5874.8</td> \n</tr>\n<tr>\n  <th>converged:</th>             <td>True</td>       <th>  LL-Null:           </th> <td> -5992.2</td> \n</tr>\n<tr>\n  <th>Covariance Type:</th>     <td>nonrobust</td>    <th>  LLR p-value:       </th> <td>4.106e-44</td>\n</tr>\n</table>\n<table class=\"simpletable\">\n<tr>\n         <td></td>            <th>coef</th>     <th>std err</th>      <th>z</th>      <th>P>|z|</th>  <th>[0.025</th>    <th>0.975]</th>  \n</tr>\n<tr>\n  <th>const</th>           <td>   -4.0956</td> <td>    0.099</td> <td>  -41.415</td> <td> 0.000</td> <td>   -4.289</td> <td>   -3.902</td>\n</tr>\n<tr>\n  <th>cod_pessoas_res</th> <td>   -0.0142</td> <td>    0.018</td> <td>   -0.787</td> <td> 0.431</td> <td>   -0.050</td> <td>    0.021</td>\n</tr>\n<tr>\n  <th>genero_fem</th>      <td>    0.1114</td> <td>    0.058</td> <td>    1.912</td> <td> 0.056</td> <td>   -0.003</td> <td>    0.226</td>\n</tr>\n<tr>\n  <th>cor_preta</th>       <td>    0.2849</td> <td>    0.094</td> <td>    3.019</td> <td> 0.003</td> <td>    0.100</td> <td>    0.470</td>\n</tr>\n<tr>\n  <th>cor_parda</th>       <td>    0.2897</td> <td>    0.062</td> <td>    4.690</td> <td> 0.000</td> <td>    0.169</td> <td>    0.411</td>\n</tr>\n<tr>\n  <th>renda_fx2</th>       <td>    0.0293</td> <td>    0.075</td> <td>    0.391</td> <td> 0.696</td> <td>   -0.118</td> <td>    0.176</td>\n</tr>\n<tr>\n  <th>renda_fx3</th>       <td>   -0.3257</td> <td>    0.085</td> <td>   -3.834</td> <td> 0.000</td> <td>   -0.492</td> <td>   -0.159</td>\n</tr>\n<tr>\n  <th>renda_fx4</th>       <td>   -0.5161</td> <td>    0.110</td> <td>   -4.673</td> <td> 0.000</td> <td>   -0.733</td> <td>   -0.300</td>\n</tr>\n<tr>\n  <th>renda_fx5</th>       <td>   -0.9928</td> <td>    0.138</td> <td>   -7.184</td> <td> 0.000</td> <td>   -1.264</td> <td>   -0.722</td>\n</tr>\n<tr>\n  <th>em_total_pub</th>    <td>    0.4589</td> <td>    0.078</td> <td>    5.904</td> <td> 0.000</td> <td>    0.307</td> <td>    0.611</td>\n</tr>\n<tr>\n  <th>esc_resp_em</th>     <td>    0.1451</td> <td>    0.062</td> <td>    2.356</td> <td> 0.018</td> <td>    0.024</td> <td>    0.266</td>\n</tr>\n<tr>\n  <th>esc_resp_sup</th>    <td>   -0.1302</td> <td>    0.093</td> <td>   -1.396</td> <td> 0.163</td> <td>   -0.313</td> <td>    0.053</td>\n</tr>\n</table>\n```\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-14-output-5.png){width=951 height=469}\n:::\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-14-output-6.png){width=951 height=758}\n:::\n:::\n\n\n### Comparação por Curso: Auxílios entre Estudantes com Curso Gratuito\n\n::: {#ca68203a .cell execution_count=14}\n``` {.python .cell-code}\ndef run_psm_by_course_gratuito(tratamento, nome_politica, covariates):\n    \"\"\"Executa PSM por curso entre estudantes com curso gratuito.\"\"\"\n    resultados = {}\n    \n    for cod_curso, nome_curso in MAP_CURSO.items():\n        df_curso = df_gratuito[df_gratuito['cod_grupo'] == cod_curso].copy()\n        \n        resultado_psm = run_psm_analysis(\n            df_curso, tratamento, resultado, covariates, \n            f'{nome_politica} - {nome_curso}',\n            min_tratados=15,\n            show_logit=False\n        )\n        resultados[nome_curso] = resultado_psm\n    \n    return resultados\n\n\ndef display_course_comparison_bloco3(resultados_por_curso, nome_politica):\n    \"\"\"Exibe tabela comparativa entre cursos.\"\"\"\n    rows = []\n    for curso, res in resultados_por_curso.items():\n        if 'erro' not in res:\n            rows.append({\n                'Curso': curso,\n                'N Tratados': res['n_tratados'],\n                'ATT': round(res['att'], 4),\n                'P-valor': round(res['p_valor'], 4),\n                'Sig.': '✅' if res['significante'] else '❌',\n                'Equil.': f\"{res['pct_equilibradas']:.0f}%\"\n            })\n        else:\n            rows.append({\n                'Curso': curso,\n                'N Tratados': '-',\n                'ATT': '-',\n                'P-valor': '-',\n                'Sig.': '⚠️',\n                'Equil.': '-'\n            })\n    \n    df_comp = pd.DataFrame(rows)\n    display(Markdown(f\"### Comparação por Curso: {nome_politica}\"))\n    display(df_comp)\n    return df_comp\n\n\n# Auxílio Permanência por curso (entre estudantes com curso gratuito)\nresultados_aux_perm_curso_gratuito = run_psm_by_course_gratuito(\n    'aux_perm', 'Auxílio Permanência (Curso Gratuito)', covariates_bloco3\n)\ndisplay_course_comparison_bloco3(resultados_aux_perm_curso_gratuito, 'Auxílio Permanência (Curso Gratuito)')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n### Comparação por Curso: Auxílio Permanência (Curso Gratuito)\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Curso</th>\n      <th>N Tratados</th>\n      <th>ATT</th>\n      <th>P-valor</th>\n      <th>Sig.</th>\n      <th>Equil.</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Administração</td>\n      <td>620</td>\n      <td>1.4955</td>\n      <td>0.0466</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Ciências Econômicas</td>\n      <td>343</td>\n      <td>1.0717</td>\n      <td>0.2492</td>\n      <td>❌</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Ciências Contábeis</td>\n      <td>392</td>\n      <td>5.6622</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=14}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Curso</th>\n      <th>N Tratados</th>\n      <th>ATT</th>\n      <th>P-valor</th>\n      <th>Sig.</th>\n      <th>Equil.</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Administração</td>\n      <td>620</td>\n      <td>1.4955</td>\n      <td>0.0466</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Ciências Econômicas</td>\n      <td>343</td>\n      <td>1.0717</td>\n      <td>0.2492</td>\n      <td>❌</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Ciências Contábeis</td>\n      <td>392</td>\n      <td>5.6622</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n::: {#dac94e67 .cell execution_count=15}\n``` {.python .cell-code}\n# Auxílio Alimentação por curso (entre estudantes com curso gratuito)\nresultados_aux_alim_curso_gratuito = run_psm_by_course_gratuito(\n    'aux_alim', 'Auxílio Alimentação (Curso Gratuito)', covariates_bloco3\n)\ndisplay_course_comparison_bloco3(resultados_aux_alim_curso_gratuito, 'Auxílio Alimentação (Curso Gratuito)')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n### Comparação por Curso: Auxílio Alimentação (Curso Gratuito)\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Curso</th>\n      <th>N Tratados</th>\n      <th>ATT</th>\n      <th>P-valor</th>\n      <th>Sig.</th>\n      <th>Equil.</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Administração</td>\n      <td>570</td>\n      <td>2.3589</td>\n      <td>0.0035</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Ciências Econômicas</td>\n      <td>279</td>\n      <td>0.0011</td>\n      <td>0.9992</td>\n      <td>❌</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Ciências Contábeis</td>\n      <td>409</td>\n      <td>4.1724</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=15}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Curso</th>\n      <th>N Tratados</th>\n      <th>ATT</th>\n      <th>P-valor</th>\n      <th>Sig.</th>\n      <th>Equil.</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Administração</td>\n      <td>570</td>\n      <td>2.3589</td>\n      <td>0.0035</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Ciências Econômicas</td>\n      <td>279</td>\n      <td>0.0011</td>\n      <td>0.9992</td>\n      <td>❌</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Ciências Contábeis</td>\n      <td>409</td>\n      <td>4.1724</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## Análise Estratificada por Curso (Blocos 1 e 2)\n\n::: callout-note\n## Objetivo\n\nVerificar se os efeitos das políticas de inclusão (Bloco 1) e permanência (Bloco 2) variam entre os cursos de Administração, Ciências Econômicas e Ciências Contábeis.\n:::\n\n::: {#b6497f67 .cell execution_count=16}\n``` {.python .cell-code code-fold=\"true\" code-summary=\"Expandir funções de análise por curso\"}\ndef run_psm_vs_pagantes_by_course(df_tratados, df_pagantes, nome_politica):\n    \"\"\"Executa PSM comparando tratados com pagantes por curso.\"\"\"\n    resultados = {}\n    \n    for cod_curso, nome_curso in MAP_CURSO.items():\n        df_trat_curso = df_tratados[df_tratados['cod_grupo'] == cod_curso].copy()\n        df_trat_curso['tratamento'] = 1\n        \n        df_ctrl_curso = df_pagantes[df_pagantes['cod_grupo'] == cod_curso].copy()\n        df_ctrl_curso['tratamento'] = 0\n        \n        df_analise = pd.concat([df_trat_curso, df_ctrl_curso])\n        \n        resultado_psm = run_psm_analysis(\n            df_analise, 'tratamento', resultado, covariates_base, \n            f'{nome_politica} - {nome_curso}',\n            min_tratados=20,\n            show_logit=False\n        )\n        resultados[nome_curso] = resultado_psm\n    \n    return resultados\n\n\ndef display_course_comparison(resultados_por_curso, nome_politica):\n    \"\"\"Exibe tabela comparativa entre cursos.\"\"\"\n    rows = []\n    for curso, res in resultados_por_curso.items():\n        if 'erro' not in res:\n            rows.append({\n                'Curso': curso,\n                'N Tratados': res['n_tratados'],\n                'ATT': round(res['att'], 4),\n                'P-valor': round(res['p_valor'], 4),\n                'Sig.': '✅' if res['significante'] else '❌',\n                'Equil.': f\"{res['pct_equilibradas']:.0f}%\"\n            })\n        else:\n            rows.append({\n                'Curso': curso,\n                'N Tratados': '-',\n                'ATT': '-',\n                'P-valor': '-',\n                'Sig.': '⚠️',\n                'Equil.': '-'\n            })\n    \n    df_comp = pd.DataFrame(rows)\n    display(Markdown(f\"### Comparação por Curso: {nome_politica}\"))\n    display(df_comp)\n    return df_comp\n```\n:::\n\n\n### ProUni Integral por Curso\n\n::: {#e0b9c7f6 .cell execution_count=17}\n``` {.python .cell-code}\ndf_prouni_int_only = df_privadas[df_privadas['prouni_int'] == 1].copy()\nresultados_prouni_curso = run_psm_vs_pagantes_by_course(\n    df_prouni_int_only, df_pagantes, 'ProUni Integral'\n)\ndisplay_course_comparison(resultados_prouni_curso, 'ProUni Integral vs Pagantes')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n### Comparação por Curso: ProUni Integral vs Pagantes\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Curso</th>\n      <th>N Tratados</th>\n      <th>ATT</th>\n      <th>P-valor</th>\n      <th>Sig.</th>\n      <th>Equil.</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Administração</td>\n      <td>14563</td>\n      <td>12.3786</td>\n      <td>0.0</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Ciências Econômicas</td>\n      <td>1311</td>\n      <td>7.1936</td>\n      <td>0.0</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Ciências Contábeis</td>\n      <td>4846</td>\n      <td>12.6373</td>\n      <td>0.0</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=17}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Curso</th>\n      <th>N Tratados</th>\n      <th>ATT</th>\n      <th>P-valor</th>\n      <th>Sig.</th>\n      <th>Equil.</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Administração</td>\n      <td>14563</td>\n      <td>12.3786</td>\n      <td>0.0</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Ciências Econômicas</td>\n      <td>1311</td>\n      <td>7.1936</td>\n      <td>0.0</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Ciências Contábeis</td>\n      <td>4846</td>\n      <td>12.6373</td>\n      <td>0.0</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n### FIES por Curso\n\n::: {#e10a60a7 .cell execution_count=18}\n``` {.python .cell-code}\ndf_fies_only = df_privadas[df_privadas['fies'] == 1].copy()\nresultados_fies_curso = run_psm_vs_pagantes_by_course(\n    df_fies_only, df_pagantes, 'FIES'\n)\ndisplay_course_comparison(resultados_fies_curso, 'FIES vs Pagantes')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n### Comparação por Curso: FIES vs Pagantes\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Curso</th>\n      <th>N Tratados</th>\n      <th>ATT</th>\n      <th>P-valor</th>\n      <th>Sig.</th>\n      <th>Equil.</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Administração</td>\n      <td>10230</td>\n      <td>2.9555</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Ciências Econômicas</td>\n      <td>682</td>\n      <td>-0.4273</td>\n      <td>0.5635</td>\n      <td>❌</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Ciências Contábeis</td>\n      <td>5087</td>\n      <td>5.0349</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=18}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Curso</th>\n      <th>N Tratados</th>\n      <th>ATT</th>\n      <th>P-valor</th>\n      <th>Sig.</th>\n      <th>Equil.</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Administração</td>\n      <td>10230</td>\n      <td>2.9555</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Ciências Econômicas</td>\n      <td>682</td>\n      <td>-0.4273</td>\n      <td>0.5635</td>\n      <td>❌</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Ciências Contábeis</td>\n      <td>5087</td>\n      <td>5.0349</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n### Auxílio Permanência por Curso (IES Públicas)\n\n::: {#8e6a07b9 .cell execution_count=19}\n``` {.python .cell-code}\ndef run_psm_by_course_publicas(tratamento, nome_politica):\n    \"\"\"Executa PSM por curso nas IES públicas.\"\"\"\n    resultados = {}\n    \n    for cod_curso, nome_curso in MAP_CURSO.items():\n        df_curso = df_publicas[df_publicas['cod_grupo'] == cod_curso].copy()\n        \n        resultado_psm = run_psm_analysis(\n            df_curso, tratamento, resultado, covariates_base, \n            f'{nome_politica} - {nome_curso}',\n            min_tratados=20,\n            show_logit=False\n        )\n        resultados[nome_curso] = resultado_psm\n    \n    return resultados\n\nresultados_aux_curso = run_psm_by_course_publicas('aux_perm', 'Auxílio Permanência')\ndisplay_course_comparison(resultados_aux_curso, 'Auxílio Permanência (Públicas)')\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n### Comparação por Curso: Auxílio Permanência (Públicas)\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Curso</th>\n      <th>N Tratados</th>\n      <th>ATT</th>\n      <th>P-valor</th>\n      <th>Sig.</th>\n      <th>Equil.</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Administração</td>\n      <td>714</td>\n      <td>6.1891</td>\n      <td>0.0</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Ciências Econômicas</td>\n      <td>406</td>\n      <td>5.9404</td>\n      <td>0.0</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Ciências Contábeis</td>\n      <td>448</td>\n      <td>5.7033</td>\n      <td>0.0</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=19}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Curso</th>\n      <th>N Tratados</th>\n      <th>ATT</th>\n      <th>P-valor</th>\n      <th>Sig.</th>\n      <th>Equil.</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>Administração</td>\n      <td>714</td>\n      <td>6.1891</td>\n      <td>0.0</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>Ciências Econômicas</td>\n      <td>406</td>\n      <td>5.9404</td>\n      <td>0.0</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>Ciências Contábeis</td>\n      <td>448</td>\n      <td>5.7033</td>\n      <td>0.0</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n## Síntese dos Resultados\n\n::: {#72d7bf3c .cell execution_count=20}\n``` {.python .cell-code}\ntodos_resultados = [\n    ('ProUni Integral vs Pagantes', resultado_prouni_int, 'Privadas'),\n    ('ProUni Parcial vs Pagantes', resultado_prouni_par, 'Privadas'),\n    ('FIES vs Pagantes', resultado_fies, 'Privadas'),\n    ('ProUni + FIES vs Pagantes', resultado_prouni_fies, 'Privadas'),\n    ('Aux. Permanência', resultado_aux_perm, 'Públicas'),\n    ('Aux. Alimentação', resultado_aux_alim, 'Públicas'),\n    ('Aux. Perm. (Curso Gratuito)', resultado_aux_perm_gratuito, 'Gratuidade'),\n    ('Aux. Alim. (Curso Gratuito)', resultado_aux_alim_gratuito, 'Gratuidade'),\n]\n\nrows_sintese = []\nfor nome, res, amostra in todos_resultados:\n    if 'erro' not in res:\n        rows_sintese.append({\n            'Política': nome,\n            'Amostra': amostra,\n            'N Tratados': res['n_tratados'],\n            'ATT': round(res['att'], 4),\n            'P-valor': round(res['p_valor'], 4),\n            'Sig.': '✅' if res['significante'] else '❌',\n            'Equilíbrio': f\"{res['pct_equilibradas']:.0f}%\"\n        })\n    else:\n        rows_sintese.append({\n            'Política': nome,\n            'Amostra': amostra,\n            'N Tratados': '-',\n            'ATT': '-',\n            'P-valor': '-',\n            'Sig.': '⚠️',\n            'Equilíbrio': '-'\n        })\n\ndf_sintese = pd.DataFrame(rows_sintese)\n\ndisplay(Markdown(\"\"\"\n### Tabela Síntese: Efeitos Estimados (ATT)\n\n**Interpretação:**\n- ATT > 0: Política associada a **aumento** na nota\n- ATT < 0: Política associada a **redução** na nota\n- Sig. ✅: Efeito estatisticamente significante (p < 0.05)\n\n**Grupos de Análise:**\n- **Privadas**: Comparação com estudantes pagantes (sem bolsa/financiamento)\n- **Públicas**: Comparação entre beneficiários e não-beneficiários de auxílios (IES públicas)\n- **Gratuidade**: Efeito de auxílios entre estudantes com curso gratuito (públicas + ProUni Integral)\n\"\"\"))\n\ndisplay(df_sintese)\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n\n### Tabela Síntese: Efeitos Estimados (ATT)\n\n**Interpretação:**\n- ATT > 0: Política associada a **aumento** na nota\n- ATT < 0: Política associada a **redução** na nota\n- Sig. ✅: Efeito estatisticamente significante (p < 0.05)\n\n**Grupos de Análise:**\n- **Privadas**: Comparação com estudantes pagantes (sem bolsa/financiamento)\n- **Públicas**: Comparação entre beneficiários e não-beneficiários de auxílios (IES públicas)\n- **Gratuidade**: Efeito de auxílios entre estudantes com curso gratuito (públicas + ProUni Integral)\n\n:::\n\n::: {.cell-output .cell-output-display}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Política</th>\n      <th>Amostra</th>\n      <th>N Tratados</th>\n      <th>ATT</th>\n      <th>P-valor</th>\n      <th>Sig.</th>\n      <th>Equilíbrio</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>ProUni Integral vs Pagantes</td>\n      <td>Privadas</td>\n      <td>20720</td>\n      <td>13.2374</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>ProUni Parcial vs Pagantes</td>\n      <td>Privadas</td>\n      <td>7979</td>\n      <td>5.8596</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>FIES vs Pagantes</td>\n      <td>Privadas</td>\n      <td>15999</td>\n      <td>4.7656</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>ProUni + FIES vs Pagantes</td>\n      <td>Privadas</td>\n      <td>1976</td>\n      <td>6.5064</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>Aux. Permanência</td>\n      <td>Públicas</td>\n      <td>1568</td>\n      <td>8.3079</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>Aux. Alimentação</td>\n      <td>Públicas</td>\n      <td>1234</td>\n      <td>5.8498</td>\n      <td>0.0000</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>Aux. Perm. (Curso Gratuito)</td>\n      <td>Gratuidade</td>\n      <td>1355</td>\n      <td>1.1854</td>\n      <td>0.0212</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>Aux. Alim. (Curso Gratuito)</td>\n      <td>Gratuidade</td>\n      <td>1258</td>\n      <td>1.1140</td>\n      <td>0.0430</td>\n      <td>✅</td>\n      <td>100%</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n------------------------------------------------------------------------\n\n::: callout-tip\n## Interpretação dos Resultados\n\n1.  **ATT Positivo e Significante:** Evidência de que a política melhora o desempenho dos beneficiários\n2.  **ATT Negativo e Significante:** Evidência de que a política está associada a menor desempenho (possível viés de seleção residual)\n3.  **ATT Não Significante:** Não há evidência estatística de efeito causal\n4.  **Equilíbrio \\< 100%:** Interpretar com cautela - nem todas as covariáveis foram equilibradas\n:::\n\n------------------------------------------------------------------------\n\n::: callout-warning\n## Limitações da Análise\n\n1.  **Suposição de Seleção nos Observáveis:** O PSM assume que todas as variáveis relevantes para a seleção foram incluídas. Variáveis não observadas (motivação, habilidade inata) podem violar esta suposição.\n\n2.  **Qualidade do Pareamento:** A validade das estimativas depende do equilíbrio alcançado nas covariáveis (SMD \\< 0.1 para todas).\n\n3.  **Validade Externa:** Os resultados se aplicam aos tratados observados na amostra, não necessariamente generalizáveis para toda a população.\n\n4.  **Endogeneidade Temporal:** As políticas podem ter efeitos que se manifestam ao longo do tempo, não capturados em análise transversal.\n:::\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js\" integrity=\"sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js\" integrity=\"sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}